<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:a="urn:hl7-org:cql-annotations:r1">
    <identifier id="DiabetesManagement" version="1.0"/>
    <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
    <usings>
        <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
        <def localId="1" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="3.0.0"/>
    </usings>
    <parameters>
        <def localId="5" name="Diabetes Conditions" accessLevel="Public">
            <parameterTypeSpecifier localId="4" xsi:type="ListTypeSpecifier">
                <elementType localId="3" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
            </parameterTypeSpecifier>
        </def>
        <def localId="8" name="Creatinine Labs" accessLevel="Public">
            <parameterTypeSpecifier localId="7" xsi:type="ListTypeSpecifier">
                <elementType localId="6" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </parameterTypeSpecifier>
        </def>
        <def localId="11" name="HbA1C Labs" accessLevel="Public">
            <parameterTypeSpecifier localId="10" xsi:type="ListTypeSpecifier">
                <elementType localId="9" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </parameterTypeSpecifier>
        </def>
        <def localId="14" name="LDL Labs" accessLevel="Public">
            <parameterTypeSpecifier localId="13" xsi:type="ListTypeSpecifier">
                <elementType localId="12" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </parameterTypeSpecifier>
        </def>
        <def localId="17" name="MicroalbCr Labs" accessLevel="Public">
            <parameterTypeSpecifier localId="16" xsi:type="ListTypeSpecifier">
                <elementType localId="15" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </parameterTypeSpecifier>
        </def>
        <def localId="20" name="Foot Exams" accessLevel="Public">
            <parameterTypeSpecifier localId="19" xsi:type="ListTypeSpecifier">
                <elementType localId="18" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </parameterTypeSpecifier>
        </def>
        <def localId="23" name="Eye Exams" accessLevel="Public">
            <parameterTypeSpecifier localId="22" xsi:type="ListTypeSpecifier">
                <elementType localId="21" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </parameterTypeSpecifier>
        </def>
        <def localId="26" name="ACE or ARB Medications" accessLevel="Public">
            <parameterTypeSpecifier localId="25" xsi:type="ListTypeSpecifier">
                <elementType localId="24" name="fhir:MedicationStatement" xsi:type="NamedTypeSpecifier"/>
            </parameterTypeSpecifier>
        </def>
    </parameters>
    <valueSets>
        <def localId="2" name="Abnormal Interpretation Codes" id="observation-interpretation" accessLevel="Public"/>
    </valueSets>
    <statements>
        <def name="Patient" context="Patient">
            <expression xsi:type="SingletonFrom">
                <operand dataType="fhir:Patient" xsi:type="Retrieve"/>
            </expression>
        </def>
        <def localId="41" name="Has Diabetes" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="41">
                    <a:s>define &quot;Has Diabetes&quot;:
                    </a:s>
                    <a:s r="40">
                        <a:s>exists</a:s>
                        <a:s r="39">
                            <a:s>(
                            </a:s>
                            <a:s r="39">
                                <a:s>
                                    <a:s r="28">
                                        <a:s r="27">
                                            <a:s>
                                                <a:s>&quot;Diabetes Conditions&quot;</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> DiabetesCondition</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="38">
                                    <a:s>where </a:s>
                                    <a:s r="38">
                                        <a:s r="33">
                                            <a:s r="31">
                                                <a:s r="30">
                                                    <a:s r="29">
                                                        <a:s>DiabetesCondition</a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="30">
                                                        <a:s>clinicalStatus</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="31">
                                                    <a:s>value</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> = </a:s>
                                            <a:s r="32">
                                                <a:s>'active'</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            and </a:s>
                                        <a:s r="37">
                                            <a:s r="36">
                                                <a:s r="35">
                                                    <a:s r="34">
                                                        <a:s>DiabetesCondition</a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="35">
                                                        <a:s>abatement</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="36">
                                                    <a:s>value</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> is null</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                                )</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="40" xsi:type="Exists">
                <operand localId="39" xsi:type="Query">
                    <source localId="28" alias="DiabetesCondition">
                        <expression localId="27" name="Diabetes Conditions" xsi:type="ParameterRef"/>
                    </source>
                    <where localId="38" xsi:type="And">
                        <operand localId="33" xsi:type="Equal">
                            <operand localId="31" path="value" xsi:type="Property">
                                <source localId="30" path="clinicalStatus" scope="DiabetesCondition" xsi:type="Property"/>
                            </operand>
                            <operand localId="32" valueType="t:String" value="active" xsi:type="Literal"/>
                        </operand>
                        <operand localId="37" xsi:type="IsNull">
                            <operand localId="36" path="value" xsi:type="Property">
                                <source localId="35" path="abatement" scope="DiabetesCondition" xsi:type="Property"/>
                            </operand>
                        </operand>
                    </where>
                </operand>
            </expression>
        </def>
        <def localId="50" name="Get Last Creatinine Lab Result" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="50">
                    <a:s>define &quot;Get Last Creatinine Lab Result&quot;:
                    </a:s>
                    <a:s r="49">
                        <a:s>Last( </a:s>
                        <a:s r="48">
                            <a:s>
                                <a:s r="43">
                                    <a:s r="42">
                                        <a:s>
                                            <a:s>&quot;Creatinine Labs&quot;</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> cLabs</a:s>
                                </a:s>
                            </a:s>
                            <a:s> </a:s>
                            <a:s r="47">
                                <a:s>sort by </a:s>
                                <a:s r="46">
                                    <a:s r="45">
                                        <a:s r="44">
                                            <a:s>effective</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="45">
                                            <a:s>value</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                        <a:s> )</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="49" xsi:type="Last">
                <source localId="48" xsi:type="Query">
                    <source localId="43" alias="cLabs">
                        <expression localId="42" name="Creatinine Labs" xsi:type="ParameterRef"/>
                    </source>
                    <sort localId="47">
                        <by localId="46" direction="asc" xsi:type="ByExpression">
                            <expression localId="45" path="value" xsi:type="Property">
                                <source localId="44" name="effective" xsi:type="IdentifierRef"/>
                            </expression>
                        </by>
                    </sort>
                </source>
            </expression>
        </def>
        <def localId="73" name="CodingToCode" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
            <annotation xsi:type="a:Annotation">
                <a:s r="73">
                    <a:s>define function CodingToCode(coding </a:s>
                    <a:s r="59">
                        <a:s>FHIR.Coding</a:s>
                    </a:s>
                    <a:s>):
                    </a:s>
                    <a:s r="72">
                        <a:s r="72">
                            <a:s>System.Code {
                            </a:s>
                            <a:s>
                                <a:s>code: </a:s>
                                <a:s r="62">
                                    <a:s r="61">
                                        <a:s r="60">
                                            <a:s>coding</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="61">
                                            <a:s>code</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="62">
                                        <a:s>value</a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>,
                            </a:s>
                            <a:s>
                                <a:s>system: </a:s>
                                <a:s r="65">
                                    <a:s r="64">
                                        <a:s r="63">
                                            <a:s>coding</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="64">
                                            <a:s>system</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="65">
                                        <a:s>value</a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>,
                            </a:s>
                            <a:s>
                                <a:s>version: </a:s>
                                <a:s r="68">
                                    <a:s r="67">
                                        <a:s r="66">
                                            <a:s>coding</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="67">
                                            <a:s>version</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="68">
                                        <a:s>value</a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>,
                            </a:s>
                            <a:s>
                                <a:s>display: </a:s>
                                <a:s r="71">
                                    <a:s r="70">
                                        <a:s r="69">
                                            <a:s>coding</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="70">
                                            <a:s>display</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="71">
                                        <a:s>value</a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                                }</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="72" classType="t:Code" xsi:type="Instance">
                <element name="code">
                    <value localId="62" path="value" xsi:type="Property">
                        <source localId="61" path="code" xsi:type="Property">
                            <source localId="60" name="coding" xsi:type="OperandRef"/>
                        </source>
                    </value>
                </element>
                <element name="system">
                    <value localId="65" path="value" xsi:type="Property">
                        <source localId="64" path="system" xsi:type="Property">
                            <source localId="63" name="coding" xsi:type="OperandRef"/>
                        </source>
                    </value>
                </element>
                <element name="version">
                    <value localId="68" path="value" xsi:type="Property">
                        <source localId="67" path="version" xsi:type="Property">
                            <source localId="66" name="coding" xsi:type="OperandRef"/>
                        </source>
                    </value>
                </element>
                <element name="display">
                    <value localId="71" path="value" xsi:type="Property">
                        <source localId="70" path="display" xsi:type="Property">
                            <source localId="69" name="coding" xsi:type="OperandRef"/>
                        </source>
                    </value>
                </element>
            </expression>
            <operand name="coding">
                <operandTypeSpecifier localId="59" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
            </operand>
        </def>
        <def localId="81" name="ToConcept" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
            <annotation xsi:type="a:Annotation">
                <a:s r="81">
                    <a:s>define function ToConcept(concept </a:s>
                    <a:s r="55">
                        <a:s>FHIR.CodeableConcept</a:s>
                    </a:s>
                    <a:s>):
                    </a:s>
                    <a:s r="80">
                        <a:s r="80">
                            <a:s>System.Concept {
                            </a:s>
                            <a:s>
                                <a:s>codes: </a:s>
                                <a:s r="76">
                                    <a:s>
                                        <a:s r="57">
                                            <a:s r="56">
                                                <a:s>
                                                    <a:s>concept.coding</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> C</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="75">
                                        <a:s>return </a:s>
                                        <a:s r="74">
                                            <a:s>CodingToCode(</a:s>
                                            <a:s r="58">
                                                <a:s>C</a:s>
                                            </a:s>
                                            <a:s>)</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>,
                            </a:s>
                            <a:s>
                                <a:s>display: </a:s>
                                <a:s r="79">
                                    <a:s r="78">
                                        <a:s r="77">
                                            <a:s>concept</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="78">
                                            <a:s>text</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="79">
                                        <a:s>value</a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                                }</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="80" classType="t:Concept" xsi:type="Instance">
                <element name="codes">
                    <value localId="76" xsi:type="Query">
                        <source localId="57" alias="C">
                            <expression localId="56" path="coding" xsi:type="Property">
                                <source name="concept" xsi:type="OperandRef"/>
                            </expression>
                        </source>
                        <return localId="75">
                            <expression localId="74" name="CodingToCode" xsi:type="FunctionRef">
                                <operand localId="58" name="C" xsi:type="AliasRef"/>
                            </expression>
                        </return>
                    </value>
                </element>
                <element name="display">
                    <value localId="79" path="value" xsi:type="Property">
                        <source localId="78" path="text" xsi:type="Property">
                            <source localId="77" name="concept" xsi:type="OperandRef"/>
                        </source>
                    </value>
                </element>
            </expression>
            <operand name="concept">
                <operandTypeSpecifier localId="55" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
            </operand>
        </def>
        <def localId="87" name="Has Abnormal Creatinine" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="87">
                    <a:s>define &quot;Has Abnormal Creatinine&quot;:
                    </a:s>
                    <a:s r="86">
                        <a:s>
                            <a:s r="52">
                                <a:s r="51">
                                    <a:s>
                                        <a:s>&quot;Get Last Creatinine Lab Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="85">
                            <a:s>return
                            </a:s>
                            <a:s r="84">
                                <a:s r="82">
                                    <a:s>ToConcept(</a:s>
                                    <a:s r="54">
                                        <a:s r="53">
                                            <a:s>Result</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="54">
                                            <a:s>interpretation</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                </a:s>
                                <a:s> in </a:s>
                                <a:s r="83">
                                    <a:s>&quot;Abnormal Interpretation Codes&quot;</a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="86" xsi:type="Query">
                <source localId="52" alias="Result">
                    <expression localId="51" name="Get Last Creatinine Lab Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="85">
                    <expression localId="84" xsi:type="InValueSet">
                        <code localId="82" name="ToConcept" xsi:type="FunctionRef">
                            <operand localId="54" path="interpretation" scope="Result" xsi:type="Property"/>
                        </code>
                        <valueset localId="83" name="Abnormal Interpretation Codes"/>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="102" name="ToQuantity" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
            <annotation xsi:type="a:Annotation">
                <a:s r="102">
                    <a:s>define function ToQuantity(quantity </a:s>
                    <a:s r="94">
                        <a:s>FHIR.Quantity</a:s>
                    </a:s>
                    <a:s>):
                    </a:s>
                    <a:s r="101">
                        <a:s r="101">
                            <a:s>System.Quantity {
                            </a:s>
                            <a:s>
                                <a:s>value: </a:s>
                                <a:s r="97">
                                    <a:s r="96">
                                        <a:s r="95">
                                            <a:s>quantity</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="96">
                                            <a:s>value</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="97">
                                        <a:s>value</a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>,
                            </a:s>
                            <a:s>
                                <a:s>unit: </a:s>
                                <a:s r="100">
                                    <a:s r="99">
                                        <a:s r="98">
                                            <a:s>quantity</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="99">
                                            <a:s>unit</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="100">
                                        <a:s>value</a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                                }</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="101" classType="t:Quantity" xsi:type="Instance">
                <element name="value">
                    <value localId="97" path="value" xsi:type="Property">
                        <source localId="96" path="value" xsi:type="Property">
                            <source localId="95" name="quantity" xsi:type="OperandRef"/>
                        </source>
                    </value>
                </element>
                <element name="unit">
                    <value localId="100" path="value" xsi:type="Property">
                        <source localId="99" path="unit" xsi:type="Property">
                            <source localId="98" name="quantity" xsi:type="OperandRef"/>
                        </source>
                    </value>
                </element>
            </expression>
            <operand name="quantity">
                <operandTypeSpecifier localId="94" name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
            </operand>
        </def>
        <def localId="106" name="Get Creatinine Quantity" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="106">
                    <a:s>define &quot;Get Creatinine Quantity&quot;:
                    </a:s>
                    <a:s r="105">
                        <a:s>
                            <a:s r="89">
                                <a:s r="88">
                                    <a:s>
                                        <a:s>&quot;Get Last Creatinine Lab Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="104">
                            <a:s>return </a:s>
                            <a:s r="103">
                                <a:s>ToQuantity(</a:s>
                                <a:s r="93">
                                    <a:s r="91">
                                        <a:s r="90">
                                            <a:s>Result</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="91">
                                            <a:s>value</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="92">
                                        <a:s>Quantity</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>)</a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="105" xsi:type="Query">
                <source localId="89" alias="Result">
                    <expression localId="88" name="Get Last Creatinine Lab Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="104">
                    <expression localId="103" name="ToQuantity" xsi:type="FunctionRef">
                        <operand localId="93" strict="false" xsi:type="As">
                            <operand localId="91" path="value" scope="Result" xsi:type="Property"/>
                            <asTypeSpecifier localId="92" name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="140" name="PeriodToInterval" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
            <annotation xsi:type="a:Annotation">
                <a:s r="140">
                    <a:s>define function PeriodToInterval(value </a:s>
                    <a:s r="132">
                        <a:s>FHIR.Period</a:s>
                    </a:s>
                    <a:s>):
                    </a:s>
                    <a:s r="139">
                        <a:s r="139">
                            <a:s>Interval[</a:s>
                            <a:s r="135">
                                <a:s r="134">
                                    <a:s r="133">
                                        <a:s>value</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="134">
                                        <a:s>&quot;start&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>.</a:s>
                                <a:s r="135">
                                    <a:s>value</a:s>
                                </a:s>
                            </a:s>
                            <a:s>, </a:s>
                            <a:s r="138">
                                <a:s r="137">
                                    <a:s r="136">
                                        <a:s>value</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="137">
                                        <a:s>&quot;end&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>.</a:s>
                                <a:s r="138">
                                    <a:s>value</a:s>
                                </a:s>
                            </a:s>
                            <a:s>]</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="139" lowClosed="true" highClosed="true" xsi:type="Interval">
                <low localId="135" path="value" xsi:type="Property">
                    <source localId="134" path="start" xsi:type="Property">
                        <source localId="133" name="value" xsi:type="OperandRef"/>
                    </source>
                </low>
                <high localId="138" path="value" xsi:type="Property">
                    <source localId="137" path="end" xsi:type="Property">
                        <source localId="136" name="value" xsi:type="OperandRef"/>
                    </source>
                </high>
            </expression>
            <operand name="value">
                <operandTypeSpecifier localId="132" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
            </operand>
        </def>
        <def localId="152" name="Needs Creatinine Test" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="152">
                    <a:s>define &quot;Needs Creatinine Test&quot;:
                    </a:s>
                    <a:s r="151">
                        <a:s>
                            <a:s r="108">
                                <a:s r="107">
                                    <a:s>
                                        <a:s>&quot;Get Last Creatinine Lab Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="150">
                            <a:s>return
                            </a:s>
                            <a:s r="149">
                                <a:s>case
                                </a:s>
                                <a:s r="113">
                                    <a:s>when </a:s>
                                    <a:s r="111">
                                        <a:s r="110">
                                            <a:s r="109">
                                                <a:s>Result</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="110">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> is null</a:s>
                                    </a:s>
                                    <a:s>
                                        then true</a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="125">
                                    <a:s>when </a:s>
                                    <a:s r="117">
                                        <a:s r="115">
                                            <a:s r="114">
                                                <a:s>Result</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="115">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> is </a:s>
                                        <a:s r="116">
                                            <a:s>dateTime</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        then </a:s>
                                    <a:s r="124">
                                        <a:s r="122">
                                            <a:s>(</a:s>
                                            <a:s r="122">
                                                <a:s r="120">
                                                    <a:s r="119">
                                                        <a:s r="118">
                                                            <a:s>Result</a:s>
                                                        </a:s>
                                                        <a:s>.</a:s>
                                                        <a:s r="119">
                                                            <a:s>effective</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="120">
                                                        <a:s>value</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s> + </a:s>
                                                <a:s r="121">
                                                    <a:s>1 year</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>)</a:s>
                                        </a:s>
                                        <a:s> &lt; </a:s>
                                        <a:s r="123">
                                            <a:s>Today()</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="147">
                                    <a:s>when </a:s>
                                    <a:s r="129">
                                        <a:s r="127">
                                            <a:s r="126">
                                                <a:s>Result</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="127">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> is </a:s>
                                        <a:s r="128">
                                            <a:s>Period</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        then </a:s>
                                    <a:s r="146">
                                        <a:s r="144">
                                            <a:s>(</a:s>
                                            <a:s r="144">
                                                <a:s r="142">
                                                    <a:s>end of </a:s>
                                                    <a:s r="141">
                                                        <a:s>PeriodToInterval(</a:s>
                                                        <a:s r="131">
                                                            <a:s r="130">
                                                                <a:s>Result</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="131">
                                                                <a:s>effective</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s>)</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s> + </a:s>
                                                <a:s r="143">
                                                    <a:s>1 year</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>)</a:s>
                                        </a:s>
                                        <a:s> &lt; </a:s>
                                        <a:s r="145">
                                            <a:s>Today()</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                    else false
                                    end</a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="151" xsi:type="Query">
                <source localId="108" alias="Result">
                    <expression localId="107" name="Get Last Creatinine Lab Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="150">
                    <expression localId="149" xsi:type="Case">
                        <caseItem localId="113">
                            <when localId="111" xsi:type="IsNull">
                                <operand localId="110" path="effective" scope="Result" xsi:type="Property"/>
                            </when>
                            <then localId="112" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                        </caseItem>
                        <caseItem localId="125">
                            <when localId="117" xsi:type="Is">
                                <operand localId="115" path="effective" scope="Result" xsi:type="Property"/>
                                <isTypeSpecifier localId="116" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                            </when>
                            <then localId="124" xsi:type="Less">
                                <operand localId="122" xsi:type="Add">
                                    <operand localId="120" path="value" xsi:type="Property">
                                        <source localId="119" path="effective" scope="Result" xsi:type="Property"/>
                                    </operand>
                                    <operand localId="121" value="1" unit="year" xsi:type="Quantity"/>
                                </operand>
                                <operand localId="123" xsi:type="Today"/>
                            </then>
                        </caseItem>
                        <caseItem localId="147">
                            <when localId="129" xsi:type="Is">
                                <operand localId="127" path="effective" scope="Result" xsi:type="Property"/>
                                <isTypeSpecifier localId="128" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                            </when>
                            <then localId="146" xsi:type="Less">
                                <operand localId="144" xsi:type="Add">
                                    <operand localId="142" xsi:type="End">
                                        <operand localId="141" name="PeriodToInterval" xsi:type="FunctionRef">
                                            <operand asType="fhir:Period" xsi:type="As">
                                                <operand localId="131" path="effective" scope="Result" xsi:type="Property"/>
                                                <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                            </operand>
                                        </operand>
                                    </operand>
                                    <operand localId="143" value="1" unit="year" xsi:type="Quantity"/>
                                </operand>
                                <operand localId="145" xsi:type="Today"/>
                            </then>
                        </caseItem>
                        <else localId="148" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="187" name="Should Consider Ordering Creatinine Test" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="187">
                    <a:s>define &quot;Should Consider Ordering Creatinine Test&quot;:
                    </a:s>
                    <a:s r="186">
                        <a:s r="154">
                            <a:s>not </a:s>
                            <a:s r="153">
                                <a:s>&quot;Needs Creatinine Test&quot;</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                            and
                        </a:s>
                        <a:s r="185">
                            <a:s>
                                <a:s r="156">
                                    <a:s r="155">
                                        <a:s>
                                            <a:s>&quot;Get Last Creatinine Lab Result&quot;</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> Result</a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                            </a:s>
                            <a:s r="184">
                                <a:s>return
                                </a:s>
                                <a:s r="183">
                                    <a:s>case
                                    </a:s>
                                    <a:s r="168">
                                        <a:s>when </a:s>
                                        <a:s r="160">
                                            <a:s r="158">
                                                <a:s r="157">
                                                    <a:s>Result</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="158">
                                                    <a:s>effective</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> is </a:s>
                                            <a:s r="159">
                                                <a:s>dateTime</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            then </a:s>
                                        <a:s r="167">
                                            <a:s r="165">
                                                <a:s>(</a:s>
                                                <a:s r="165">
                                                    <a:s r="163">
                                                        <a:s r="162">
                                                            <a:s r="161">
                                                                <a:s>Result</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="162">
                                                                <a:s>effective</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s>.</a:s>
                                                        <a:s r="163">
                                                            <a:s>value</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s> + </a:s>
                                                    <a:s r="164">
                                                        <a:s>10 months</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                            </a:s>
                                            <a:s> &lt; </a:s>
                                            <a:s r="166">
                                                <a:s>Today()</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                    </a:s>
                                    <a:s r="181">
                                        <a:s>when </a:s>
                                        <a:s r="172">
                                            <a:s r="170">
                                                <a:s r="169">
                                                    <a:s>Result</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="170">
                                                    <a:s>effective</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> is </a:s>
                                            <a:s r="171">
                                                <a:s>Period</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            then </a:s>
                                        <a:s r="180">
                                            <a:s r="178">
                                                <a:s>(</a:s>
                                                <a:s r="178">
                                                    <a:s r="176">
                                                        <a:s>end of </a:s>
                                                        <a:s r="175">
                                                            <a:s>PeriodToInterval(</a:s>
                                                            <a:s r="174">
                                                                <a:s r="173">
                                                                    <a:s>Result</a:s>
                                                                </a:s>
                                                                <a:s>.</a:s>
                                                                <a:s r="174">
                                                                    <a:s>effective</a:s>
                                                                </a:s>
                                                            </a:s>
                                                            <a:s>)</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s> + </a:s>
                                                    <a:s r="177">
                                                        <a:s>10 months</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                            </a:s>
                                            <a:s> &lt; </a:s>
                                            <a:s r="179">
                                                <a:s>Today()</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        else false
                                        end</a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="186" xsi:type="And">
                <operand localId="154" xsi:type="Not">
                    <operand localId="153" name="Needs Creatinine Test" xsi:type="ExpressionRef"/>
                </operand>
                <operand localId="185" xsi:type="Query">
                    <source localId="156" alias="Result">
                        <expression localId="155" name="Get Last Creatinine Lab Result" xsi:type="ExpressionRef"/>
                    </source>
                    <return localId="184">
                        <expression localId="183" xsi:type="Case">
                            <caseItem localId="168">
                                <when localId="160" xsi:type="Is">
                                    <operand localId="158" path="effective" scope="Result" xsi:type="Property"/>
                                    <isTypeSpecifier localId="159" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                </when>
                                <then localId="167" xsi:type="Less">
                                    <operand localId="165" xsi:type="Add">
                                        <operand localId="163" path="value" xsi:type="Property">
                                            <source localId="162" path="effective" scope="Result" xsi:type="Property"/>
                                        </operand>
                                        <operand localId="164" value="10" unit="months" xsi:type="Quantity"/>
                                    </operand>
                                    <operand localId="166" xsi:type="Today"/>
                                </then>
                            </caseItem>
                            <caseItem localId="181">
                                <when localId="172" xsi:type="Is">
                                    <operand localId="170" path="effective" scope="Result" xsi:type="Property"/>
                                    <isTypeSpecifier localId="171" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                </when>
                                <then localId="180" xsi:type="Less">
                                    <operand localId="178" xsi:type="Add">
                                        <operand localId="176" xsi:type="End">
                                            <operand localId="175" name="PeriodToInterval" xsi:type="FunctionRef">
                                                <operand asType="fhir:Period" xsi:type="As">
                                                    <operand localId="174" path="effective" scope="Result" xsi:type="Property"/>
                                                    <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                            </operand>
                                        </operand>
                                        <operand localId="177" value="10" unit="months" xsi:type="Quantity"/>
                                    </operand>
                                    <operand localId="179" xsi:type="Today"/>
                                </then>
                            </caseItem>
                            <else localId="182" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                        </expression>
                    </return>
                </operand>
            </expression>
        </def>
        <def localId="189" name="AbnormalCreatinineSummary" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="189">
                    <a:s>define AbnormalCreatinineSummary:
                    </a:s>
                    <a:s r="188">
                        <a:s>'Abnormal Creatinine level detected in most recent lab results'</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="188" valueType="t:String" value="Abnormal Creatinine level detected in most recent lab results" xsi:type="Literal"/>
        </def>
        <def localId="196" name="AbnormalCreatinineDetail" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="196">
                    <a:s>define AbnormalCreatinineDetail:
                    </a:s>
                    <a:s r="195">
                        <a:s r="193">
                            <a:s r="190">
                                <a:s>'The Creatinine level of '</a:s>
                            </a:s>
                            <a:s> + </a:s>
                            <a:s r="192">
                                <a:s>ToString(</a:s>
                                <a:s r="191">
                                    <a:s>&quot;Get Creatinine Quantity&quot;</a:s>
                                </a:s>
                                <a:s>)</a:s>
                            </a:s>
                        </a:s>
                        <a:s> + </a:s>
                        <a:s r="194">
                            <a:s>' in the most recent lab is considered abnormal'</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="195" xsi:type="Concatenate">
                <operand localId="193" xsi:type="Concatenate">
                    <operand localId="190" valueType="t:String" value="The Creatinine level of " xsi:type="Literal"/>
                    <operand localId="192" xsi:type="ToString">
                        <operand localId="191" name="Get Creatinine Quantity" xsi:type="ExpressionRef"/>
                    </operand>
                </operand>
                <operand localId="194" valueType="t:String" value=" in the most recent lab is considered abnormal" xsi:type="Literal"/>
            </expression>
        </def>
        <def localId="198" name="AbnormalCreatinineIndicator" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="198">
                    <a:s>define AbnormalCreatinineIndicator:
                    </a:s>
                    <a:s r="197">
                        <a:s>'warning'</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="197" valueType="t:String" value="warning" xsi:type="Literal"/>
        </def>
        <def localId="207" name="Get Last HbA1C Lab Result" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="207">
                    <a:s>define &quot;Get Last HbA1C Lab Result&quot;:
                    </a:s>
                    <a:s r="206">
                        <a:s>Last( </a:s>
                        <a:s r="205">
                            <a:s>
                                <a:s r="200">
                                    <a:s r="199">
                                        <a:s>
                                            <a:s>&quot;HbA1C Labs&quot;</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> hLabs</a:s>
                                </a:s>
                            </a:s>
                            <a:s> </a:s>
                            <a:s r="204">
                                <a:s>sort by </a:s>
                                <a:s r="203">
                                    <a:s r="202">
                                        <a:s r="201">
                                            <a:s>effective</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="202">
                                            <a:s>value</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                        <a:s> )</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="206" xsi:type="Last">
                <source localId="205" xsi:type="Query">
                    <source localId="200" alias="hLabs">
                        <expression localId="199" name="HbA1C Labs" xsi:type="ParameterRef"/>
                    </source>
                    <sort localId="204">
                        <by localId="203" direction="asc" xsi:type="ByExpression">
                            <expression localId="202" path="value" xsi:type="Property">
                                <source localId="201" name="effective" xsi:type="IdentifierRef"/>
                            </expression>
                        </by>
                    </sort>
                </source>
            </expression>
        </def>
        <def localId="217" name="Has Abnormal HbA1C" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="217">
                    <a:s>define &quot;Has Abnormal HbA1C&quot;:
                    </a:s>
                    <a:s r="216">
                        <a:s>
                            <a:s r="209">
                                <a:s r="208">
                                    <a:s>
                                        <a:s>&quot;Get Last HbA1C Lab Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="215">
                            <a:s>return
                            </a:s>
                            <a:s r="214">
                                <a:s r="212">
                                    <a:s>ToConcept(</a:s>
                                    <a:s r="211">
                                        <a:s r="210">
                                            <a:s>Result</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="211">
                                            <a:s>interpretation</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                </a:s>
                                <a:s> in </a:s>
                                <a:s r="213">
                                    <a:s>&quot;Abnormal Interpretation Codes&quot;</a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="216" xsi:type="Query">
                <source localId="209" alias="Result">
                    <expression localId="208" name="Get Last HbA1C Lab Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="215">
                    <expression localId="214" xsi:type="InValueSet">
                        <code localId="212" name="ToConcept" xsi:type="FunctionRef">
                            <operand localId="211" path="interpretation" scope="Result" xsi:type="Property"/>
                        </code>
                        <valueset localId="213" name="Abnormal Interpretation Codes"/>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="227" name="Get HbA1C Quantity" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="227">
                    <a:s>define &quot;Get HbA1C Quantity&quot;:
                    </a:s>
                    <a:s r="226">
                        <a:s>
                            <a:s r="219">
                                <a:s r="218">
                                    <a:s>
                                        <a:s>&quot;Get Last HbA1C Lab Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="225">
                            <a:s>return </a:s>
                            <a:s r="224">
                                <a:s>ToQuantity(</a:s>
                                <a:s r="223">
                                    <a:s r="221">
                                        <a:s r="220">
                                            <a:s>Result</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="221">
                                            <a:s>value</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="222">
                                        <a:s>Quantity</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>)</a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="226" xsi:type="Query">
                <source localId="219" alias="Result">
                    <expression localId="218" name="Get Last HbA1C Lab Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="225">
                    <expression localId="224" name="ToQuantity" xsi:type="FunctionRef">
                        <operand localId="223" strict="false" xsi:type="As">
                            <operand localId="221" path="value" scope="Result" xsi:type="Property"/>
                            <asTypeSpecifier localId="222" name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="264" name="Needs HbA1C Test" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="264">
                    <a:s>define &quot;Needs HbA1C Test&quot;:
                    </a:s>
                    <a:s r="263">
                        <a:s>
                            <a:s r="229">
                                <a:s r="228">
                                    <a:s>
                                        <a:s>&quot;Get Last HbA1C Lab Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="262">
                            <a:s>return
                            </a:s>
                            <a:s r="261">
                                <a:s>case
                                </a:s>
                                <a:s r="234">
                                    <a:s>when </a:s>
                                    <a:s r="232">
                                        <a:s r="231">
                                            <a:s r="230">
                                                <a:s>Result</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="231">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> is null</a:s>
                                    </a:s>
                                    <a:s>
                                        then true</a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="246">
                                    <a:s>when </a:s>
                                    <a:s r="238">
                                        <a:s r="236">
                                            <a:s r="235">
                                                <a:s>Result</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="236">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> is </a:s>
                                        <a:s r="237">
                                            <a:s>dateTime</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        then </a:s>
                                    <a:s r="245">
                                        <a:s r="243">
                                            <a:s>(</a:s>
                                            <a:s r="243">
                                                <a:s r="241">
                                                    <a:s r="240">
                                                        <a:s r="239">
                                                            <a:s>Result</a:s>
                                                        </a:s>
                                                        <a:s>.</a:s>
                                                        <a:s r="240">
                                                            <a:s>effective</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="241">
                                                        <a:s>value</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s> + </a:s>
                                                <a:s r="242">
                                                    <a:s>6 months</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>)</a:s>
                                        </a:s>
                                        <a:s> &lt; </a:s>
                                        <a:s r="244">
                                            <a:s>Today()</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="259">
                                    <a:s>when </a:s>
                                    <a:s r="250">
                                        <a:s r="248">
                                            <a:s r="247">
                                                <a:s>Result</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="248">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> is </a:s>
                                        <a:s r="249">
                                            <a:s>Period</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        then </a:s>
                                    <a:s r="258">
                                        <a:s r="256">
                                            <a:s>(</a:s>
                                            <a:s r="256">
                                                <a:s r="254">
                                                    <a:s>end of </a:s>
                                                    <a:s r="253">
                                                        <a:s>PeriodToInterval(</a:s>
                                                        <a:s r="252">
                                                            <a:s r="251">
                                                                <a:s>Result</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="252">
                                                                <a:s>effective</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s>)</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s> + </a:s>
                                                <a:s r="255">
                                                    <a:s>6 months</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>)</a:s>
                                        </a:s>
                                        <a:s> &lt; </a:s>
                                        <a:s r="257">
                                            <a:s>Today()</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                    else false
                                    end</a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="263" xsi:type="Query">
                <source localId="229" alias="Result">
                    <expression localId="228" name="Get Last HbA1C Lab Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="262">
                    <expression localId="261" xsi:type="Case">
                        <caseItem localId="234">
                            <when localId="232" xsi:type="IsNull">
                                <operand localId="231" path="effective" scope="Result" xsi:type="Property"/>
                            </when>
                            <then localId="233" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                        </caseItem>
                        <caseItem localId="246">
                            <when localId="238" xsi:type="Is">
                                <operand localId="236" path="effective" scope="Result" xsi:type="Property"/>
                                <isTypeSpecifier localId="237" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                            </when>
                            <then localId="245" xsi:type="Less">
                                <operand localId="243" xsi:type="Add">
                                    <operand localId="241" path="value" xsi:type="Property">
                                        <source localId="240" path="effective" scope="Result" xsi:type="Property"/>
                                    </operand>
                                    <operand localId="242" value="6" unit="months" xsi:type="Quantity"/>
                                </operand>
                                <operand localId="244" xsi:type="Today"/>
                            </then>
                        </caseItem>
                        <caseItem localId="259">
                            <when localId="250" xsi:type="Is">
                                <operand localId="248" path="effective" scope="Result" xsi:type="Property"/>
                                <isTypeSpecifier localId="249" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                            </when>
                            <then localId="258" xsi:type="Less">
                                <operand localId="256" xsi:type="Add">
                                    <operand localId="254" xsi:type="End">
                                        <operand localId="253" name="PeriodToInterval" xsi:type="FunctionRef">
                                            <operand asType="fhir:Period" xsi:type="As">
                                                <operand localId="252" path="effective" scope="Result" xsi:type="Property"/>
                                                <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                            </operand>
                                        </operand>
                                    </operand>
                                    <operand localId="255" value="6" unit="months" xsi:type="Quantity"/>
                                </operand>
                                <operand localId="257" xsi:type="Today"/>
                            </then>
                        </caseItem>
                        <else localId="260" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="299" name="Should Consider Ordering HbA1C Test" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="299">
                    <a:s>define &quot;Should Consider Ordering HbA1C Test&quot;:
                    </a:s>
                    <a:s r="298">
                        <a:s r="266">
                            <a:s>not </a:s>
                            <a:s r="265">
                                <a:s>&quot;Needs HbA1C Test&quot;</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                            and
                        </a:s>
                        <a:s r="297">
                            <a:s>
                                <a:s r="268">
                                    <a:s r="267">
                                        <a:s>
                                            <a:s>&quot;Get Last HbA1C Lab Result&quot;</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> Result</a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                            </a:s>
                            <a:s r="296">
                                <a:s>return
                                </a:s>
                                <a:s r="295">
                                    <a:s>case
                                    </a:s>
                                    <a:s r="280">
                                        <a:s>when </a:s>
                                        <a:s r="272">
                                            <a:s r="270">
                                                <a:s r="269">
                                                    <a:s>Result</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="270">
                                                    <a:s>effective</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> is </a:s>
                                            <a:s r="271">
                                                <a:s>dateTime</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            then </a:s>
                                        <a:s r="279">
                                            <a:s r="277">
                                                <a:s>(</a:s>
                                                <a:s r="277">
                                                    <a:s r="275">
                                                        <a:s r="274">
                                                            <a:s r="273">
                                                                <a:s>Result</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="274">
                                                                <a:s>effective</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s>.</a:s>
                                                        <a:s r="275">
                                                            <a:s>value</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s> + </a:s>
                                                    <a:s r="276">
                                                        <a:s>5 months</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                            </a:s>
                                            <a:s> &lt; </a:s>
                                            <a:s r="278">
                                                <a:s>Today()</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                    </a:s>
                                    <a:s r="293">
                                        <a:s>when </a:s>
                                        <a:s r="284">
                                            <a:s r="282">
                                                <a:s r="281">
                                                    <a:s>Result</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="282">
                                                    <a:s>effective</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> is </a:s>
                                            <a:s r="283">
                                                <a:s>Period</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            then </a:s>
                                        <a:s r="292">
                                            <a:s r="290">
                                                <a:s>(</a:s>
                                                <a:s r="290">
                                                    <a:s r="288">
                                                        <a:s>end of </a:s>
                                                        <a:s r="287">
                                                            <a:s>PeriodToInterval(</a:s>
                                                            <a:s r="286">
                                                                <a:s r="285">
                                                                    <a:s>Result</a:s>
                                                                </a:s>
                                                                <a:s>.</a:s>
                                                                <a:s r="286">
                                                                    <a:s>effective</a:s>
                                                                </a:s>
                                                            </a:s>
                                                            <a:s>)</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s> + </a:s>
                                                    <a:s r="289">
                                                        <a:s>5 months</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                            </a:s>
                                            <a:s> &lt; </a:s>
                                            <a:s r="291">
                                                <a:s>Today()</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        else false
                                        end</a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="298" xsi:type="And">
                <operand localId="266" xsi:type="Not">
                    <operand localId="265" name="Needs HbA1C Test" xsi:type="ExpressionRef"/>
                </operand>
                <operand localId="297" xsi:type="Query">
                    <source localId="268" alias="Result">
                        <expression localId="267" name="Get Last HbA1C Lab Result" xsi:type="ExpressionRef"/>
                    </source>
                    <return localId="296">
                        <expression localId="295" xsi:type="Case">
                            <caseItem localId="280">
                                <when localId="272" xsi:type="Is">
                                    <operand localId="270" path="effective" scope="Result" xsi:type="Property"/>
                                    <isTypeSpecifier localId="271" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                </when>
                                <then localId="279" xsi:type="Less">
                                    <operand localId="277" xsi:type="Add">
                                        <operand localId="275" path="value" xsi:type="Property">
                                            <source localId="274" path="effective" scope="Result" xsi:type="Property"/>
                                        </operand>
                                        <operand localId="276" value="5" unit="months" xsi:type="Quantity"/>
                                    </operand>
                                    <operand localId="278" xsi:type="Today"/>
                                </then>
                            </caseItem>
                            <caseItem localId="293">
                                <when localId="284" xsi:type="Is">
                                    <operand localId="282" path="effective" scope="Result" xsi:type="Property"/>
                                    <isTypeSpecifier localId="283" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                </when>
                                <then localId="292" xsi:type="Less">
                                    <operand localId="290" xsi:type="Add">
                                        <operand localId="288" xsi:type="End">
                                            <operand localId="287" name="PeriodToInterval" xsi:type="FunctionRef">
                                                <operand asType="fhir:Period" xsi:type="As">
                                                    <operand localId="286" path="effective" scope="Result" xsi:type="Property"/>
                                                    <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                            </operand>
                                        </operand>
                                        <operand localId="289" value="5" unit="months" xsi:type="Quantity"/>
                                    </operand>
                                    <operand localId="291" xsi:type="Today"/>
                                </then>
                            </caseItem>
                            <else localId="294" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                        </expression>
                    </return>
                </operand>
            </expression>
        </def>
        <def localId="301" name="AbnormalHbA1CSummary" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="301">
                    <a:s>define AbnormalHbA1CSummary:
                    </a:s>
                    <a:s r="300">
                        <a:s>'Abnormal HbA1C level detected in most recent lab results'</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="300" valueType="t:String" value="Abnormal HbA1C level detected in most recent lab results" xsi:type="Literal"/>
        </def>
        <def localId="308" name="AbnormalHbA1CDetail" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="308">
                    <a:s>define AbnormalHbA1CDetail:
                    </a:s>
                    <a:s r="307">
                        <a:s r="305">
                            <a:s r="302">
                                <a:s>'The HbA1C level of '</a:s>
                            </a:s>
                            <a:s> + </a:s>
                            <a:s r="304">
                                <a:s>ToString(</a:s>
                                <a:s r="303">
                                    <a:s>&quot;Get HbA1C Quantity&quot;</a:s>
                                </a:s>
                                <a:s>)</a:s>
                            </a:s>
                        </a:s>
                        <a:s> + </a:s>
                        <a:s r="306">
                            <a:s>' in the most recent lab is considered abnormal'</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="307" xsi:type="Concatenate">
                <operand localId="305" xsi:type="Concatenate">
                    <operand localId="302" valueType="t:String" value="The HbA1C level of " xsi:type="Literal"/>
                    <operand localId="304" xsi:type="ToString">
                        <operand localId="303" name="Get HbA1C Quantity" xsi:type="ExpressionRef"/>
                    </operand>
                </operand>
                <operand localId="306" valueType="t:String" value=" in the most recent lab is considered abnormal" xsi:type="Literal"/>
            </expression>
        </def>
        <def localId="310" name="AbnormalHbA1CIndicator" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="310">
                    <a:s>define AbnormalHbA1CIndicator:
                    </a:s>
                    <a:s r="309">
                        <a:s>'warning'</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="309" valueType="t:String" value="warning" xsi:type="Literal"/>
        </def>
        <def localId="319" name="Get Last LDL Lab Result" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="319">
                    <a:s>define &quot;Get Last LDL Lab Result&quot;:
                    </a:s>
                    <a:s r="318">
                        <a:s>Last( </a:s>
                        <a:s r="317">
                            <a:s>
                                <a:s r="312">
                                    <a:s r="311">
                                        <a:s>
                                            <a:s>&quot;LDL Labs&quot;</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> lLabs</a:s>
                                </a:s>
                            </a:s>
                            <a:s> </a:s>
                            <a:s r="316">
                                <a:s>sort by </a:s>
                                <a:s r="315">
                                    <a:s r="314">
                                        <a:s r="313">
                                            <a:s>effective</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="314">
                                            <a:s>value</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                        <a:s> )</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="318" xsi:type="Last">
                <source localId="317" xsi:type="Query">
                    <source localId="312" alias="lLabs">
                        <expression localId="311" name="LDL Labs" xsi:type="ParameterRef"/>
                    </source>
                    <sort localId="316">
                        <by localId="315" direction="asc" xsi:type="ByExpression">
                            <expression localId="314" path="value" xsi:type="Property">
                                <source localId="313" name="effective" xsi:type="IdentifierRef"/>
                            </expression>
                        </by>
                    </sort>
                </source>
            </expression>
        </def>
        <def localId="329" name="Has Abnormal LDL" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="329">
                    <a:s>define &quot;Has Abnormal LDL&quot;:
                    </a:s>
                    <a:s r="328">
                        <a:s>
                            <a:s r="321">
                                <a:s r="320">
                                    <a:s>
                                        <a:s>&quot;Get Last LDL Lab Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="327">
                            <a:s>return
                            </a:s>
                            <a:s r="326">
                                <a:s r="324">
                                    <a:s>ToConcept(</a:s>
                                    <a:s r="323">
                                        <a:s r="322">
                                            <a:s>Result</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="323">
                                            <a:s>interpretation</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                </a:s>
                                <a:s> in </a:s>
                                <a:s r="325">
                                    <a:s>&quot;Abnormal Interpretation Codes&quot;</a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="328" xsi:type="Query">
                <source localId="321" alias="Result">
                    <expression localId="320" name="Get Last LDL Lab Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="327">
                    <expression localId="326" xsi:type="InValueSet">
                        <code localId="324" name="ToConcept" xsi:type="FunctionRef">
                            <operand localId="323" path="interpretation" scope="Result" xsi:type="Property"/>
                        </code>
                        <valueset localId="325" name="Abnormal Interpretation Codes"/>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="339" name="Get LDL Quantity" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="339">
                    <a:s>define &quot;Get LDL Quantity&quot;:
                    </a:s>
                    <a:s r="338">
                        <a:s>
                            <a:s r="331">
                                <a:s r="330">
                                    <a:s>
                                        <a:s>&quot;Get Last LDL Lab Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="337">
                            <a:s>return </a:s>
                            <a:s r="336">
                                <a:s>ToQuantity(</a:s>
                                <a:s r="335">
                                    <a:s r="333">
                                        <a:s r="332">
                                            <a:s>Result</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="333">
                                            <a:s>value</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="334">
                                        <a:s>Quantity</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>)</a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="338" xsi:type="Query">
                <source localId="331" alias="Result">
                    <expression localId="330" name="Get Last LDL Lab Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="337">
                    <expression localId="336" name="ToQuantity" xsi:type="FunctionRef">
                        <operand localId="335" strict="false" xsi:type="As">
                            <operand localId="333" path="value" scope="Result" xsi:type="Property"/>
                            <asTypeSpecifier localId="334" name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="376" name="Needs LDL Test" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="376">
                    <a:s>define &quot;Needs LDL Test&quot;:
                    </a:s>
                    <a:s r="375">
                        <a:s>
                            <a:s r="341">
                                <a:s r="340">
                                    <a:s>
                                        <a:s>&quot;Get Last LDL Lab Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="374">
                            <a:s>return
                            </a:s>
                            <a:s r="373">
                                <a:s>case
                                </a:s>
                                <a:s r="346">
                                    <a:s>when </a:s>
                                    <a:s r="344">
                                        <a:s r="343">
                                            <a:s r="342">
                                                <a:s>Result</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="343">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> is null</a:s>
                                    </a:s>
                                    <a:s>
                                        then true</a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="358">
                                    <a:s>when </a:s>
                                    <a:s r="350">
                                        <a:s r="348">
                                            <a:s r="347">
                                                <a:s>Result</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="348">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> is </a:s>
                                        <a:s r="349">
                                            <a:s>dateTime</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        then </a:s>
                                    <a:s r="357">
                                        <a:s r="355">
                                            <a:s>(</a:s>
                                            <a:s r="355">
                                                <a:s r="353">
                                                    <a:s r="352">
                                                        <a:s r="351">
                                                            <a:s>Result</a:s>
                                                        </a:s>
                                                        <a:s>.</a:s>
                                                        <a:s r="352">
                                                            <a:s>effective</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="353">
                                                        <a:s>value</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s> + </a:s>
                                                <a:s r="354">
                                                    <a:s>1 year</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>)</a:s>
                                        </a:s>
                                        <a:s> &lt; </a:s>
                                        <a:s r="356">
                                            <a:s>Today()</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="371">
                                    <a:s>when </a:s>
                                    <a:s r="362">
                                        <a:s r="360">
                                            <a:s r="359">
                                                <a:s>Result</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="360">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> is </a:s>
                                        <a:s r="361">
                                            <a:s>Period</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        then </a:s>
                                    <a:s r="370">
                                        <a:s r="368">
                                            <a:s>(</a:s>
                                            <a:s r="368">
                                                <a:s r="366">
                                                    <a:s>end of </a:s>
                                                    <a:s r="365">
                                                        <a:s>PeriodToInterval(</a:s>
                                                        <a:s r="364">
                                                            <a:s r="363">
                                                                <a:s>Result</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="364">
                                                                <a:s>effective</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s>)</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s> + </a:s>
                                                <a:s r="367">
                                                    <a:s>1 year</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>)</a:s>
                                        </a:s>
                                        <a:s> &lt; </a:s>
                                        <a:s r="369">
                                            <a:s>Today()</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                    else false
                                    end</a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="375" xsi:type="Query">
                <source localId="341" alias="Result">
                    <expression localId="340" name="Get Last LDL Lab Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="374">
                    <expression localId="373" xsi:type="Case">
                        <caseItem localId="346">
                            <when localId="344" xsi:type="IsNull">
                                <operand localId="343" path="effective" scope="Result" xsi:type="Property"/>
                            </when>
                            <then localId="345" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                        </caseItem>
                        <caseItem localId="358">
                            <when localId="350" xsi:type="Is">
                                <operand localId="348" path="effective" scope="Result" xsi:type="Property"/>
                                <isTypeSpecifier localId="349" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                            </when>
                            <then localId="357" xsi:type="Less">
                                <operand localId="355" xsi:type="Add">
                                    <operand localId="353" path="value" xsi:type="Property">
                                        <source localId="352" path="effective" scope="Result" xsi:type="Property"/>
                                    </operand>
                                    <operand localId="354" value="1" unit="year" xsi:type="Quantity"/>
                                </operand>
                                <operand localId="356" xsi:type="Today"/>
                            </then>
                        </caseItem>
                        <caseItem localId="371">
                            <when localId="362" xsi:type="Is">
                                <operand localId="360" path="effective" scope="Result" xsi:type="Property"/>
                                <isTypeSpecifier localId="361" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                            </when>
                            <then localId="370" xsi:type="Less">
                                <operand localId="368" xsi:type="Add">
                                    <operand localId="366" xsi:type="End">
                                        <operand localId="365" name="PeriodToInterval" xsi:type="FunctionRef">
                                            <operand asType="fhir:Period" xsi:type="As">
                                                <operand localId="364" path="effective" scope="Result" xsi:type="Property"/>
                                                <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                            </operand>
                                        </operand>
                                    </operand>
                                    <operand localId="367" value="1" unit="year" xsi:type="Quantity"/>
                                </operand>
                                <operand localId="369" xsi:type="Today"/>
                            </then>
                        </caseItem>
                        <else localId="372" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="411" name="Should Consider Ordering LDL Test" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="411">
                    <a:s>define &quot;Should Consider Ordering LDL Test&quot;:
                    </a:s>
                    <a:s r="410">
                        <a:s r="378">
                            <a:s>not </a:s>
                            <a:s r="377">
                                <a:s>&quot;Needs LDL Test&quot;</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                            and
                        </a:s>
                        <a:s r="409">
                            <a:s>
                                <a:s r="380">
                                    <a:s r="379">
                                        <a:s>
                                            <a:s>&quot;Get Last LDL Lab Result&quot;</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> Result</a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                            </a:s>
                            <a:s r="408">
                                <a:s>return
                                </a:s>
                                <a:s r="407">
                                    <a:s>case
                                    </a:s>
                                    <a:s r="392">
                                        <a:s>when </a:s>
                                        <a:s r="384">
                                            <a:s r="382">
                                                <a:s r="381">
                                                    <a:s>Result</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="382">
                                                    <a:s>effective</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> is </a:s>
                                            <a:s r="383">
                                                <a:s>dateTime</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            then </a:s>
                                        <a:s r="391">
                                            <a:s r="389">
                                                <a:s>(</a:s>
                                                <a:s r="389">
                                                    <a:s r="387">
                                                        <a:s r="386">
                                                            <a:s r="385">
                                                                <a:s>Result</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="386">
                                                                <a:s>effective</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s>.</a:s>
                                                        <a:s r="387">
                                                            <a:s>value</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s> + </a:s>
                                                    <a:s r="388">
                                                        <a:s>10 months</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                            </a:s>
                                            <a:s> &lt; </a:s>
                                            <a:s r="390">
                                                <a:s>Today()</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                    </a:s>
                                    <a:s r="405">
                                        <a:s>when </a:s>
                                        <a:s r="396">
                                            <a:s r="394">
                                                <a:s r="393">
                                                    <a:s>Result</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="394">
                                                    <a:s>effective</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> is </a:s>
                                            <a:s r="395">
                                                <a:s>Period</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            then </a:s>
                                        <a:s r="404">
                                            <a:s r="402">
                                                <a:s>(</a:s>
                                                <a:s r="402">
                                                    <a:s r="400">
                                                        <a:s>end of </a:s>
                                                        <a:s r="399">
                                                            <a:s>PeriodToInterval(</a:s>
                                                            <a:s r="398">
                                                                <a:s r="397">
                                                                    <a:s>Result</a:s>
                                                                </a:s>
                                                                <a:s>.</a:s>
                                                                <a:s r="398">
                                                                    <a:s>effective</a:s>
                                                                </a:s>
                                                            </a:s>
                                                            <a:s>)</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s> + </a:s>
                                                    <a:s r="401">
                                                        <a:s>10 months</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                            </a:s>
                                            <a:s> &lt; </a:s>
                                            <a:s r="403">
                                                <a:s>Today()</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        else false
                                        end</a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="410" xsi:type="And">
                <operand localId="378" xsi:type="Not">
                    <operand localId="377" name="Needs LDL Test" xsi:type="ExpressionRef"/>
                </operand>
                <operand localId="409" xsi:type="Query">
                    <source localId="380" alias="Result">
                        <expression localId="379" name="Get Last LDL Lab Result" xsi:type="ExpressionRef"/>
                    </source>
                    <return localId="408">
                        <expression localId="407" xsi:type="Case">
                            <caseItem localId="392">
                                <when localId="384" xsi:type="Is">
                                    <operand localId="382" path="effective" scope="Result" xsi:type="Property"/>
                                    <isTypeSpecifier localId="383" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                </when>
                                <then localId="391" xsi:type="Less">
                                    <operand localId="389" xsi:type="Add">
                                        <operand localId="387" path="value" xsi:type="Property">
                                            <source localId="386" path="effective" scope="Result" xsi:type="Property"/>
                                        </operand>
                                        <operand localId="388" value="10" unit="months" xsi:type="Quantity"/>
                                    </operand>
                                    <operand localId="390" xsi:type="Today"/>
                                </then>
                            </caseItem>
                            <caseItem localId="405">
                                <when localId="396" xsi:type="Is">
                                    <operand localId="394" path="effective" scope="Result" xsi:type="Property"/>
                                    <isTypeSpecifier localId="395" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                </when>
                                <then localId="404" xsi:type="Less">
                                    <operand localId="402" xsi:type="Add">
                                        <operand localId="400" xsi:type="End">
                                            <operand localId="399" name="PeriodToInterval" xsi:type="FunctionRef">
                                                <operand asType="fhir:Period" xsi:type="As">
                                                    <operand localId="398" path="effective" scope="Result" xsi:type="Property"/>
                                                    <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                            </operand>
                                        </operand>
                                        <operand localId="401" value="10" unit="months" xsi:type="Quantity"/>
                                    </operand>
                                    <operand localId="403" xsi:type="Today"/>
                                </then>
                            </caseItem>
                            <else localId="406" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                        </expression>
                    </return>
                </operand>
            </expression>
        </def>
        <def localId="413" name="AbnormalLDLSummary" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="413">
                    <a:s>define AbnormalLDLSummary:
                    </a:s>
                    <a:s r="412">
                        <a:s>'Abnormal LDL cholesterol level detected in most recent lab results'</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="412" valueType="t:String" value="Abnormal LDL cholesterol level detected in most recent lab results" xsi:type="Literal"/>
        </def>
        <def localId="420" name="AbnormalLDLDetail" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="420">
                    <a:s>define AbnormalLDLDetail:
                    </a:s>
                    <a:s r="419">
                        <a:s r="417">
                            <a:s r="414">
                                <a:s>'The LDL cholesterol level of '</a:s>
                            </a:s>
                            <a:s> + </a:s>
                            <a:s r="416">
                                <a:s>ToString(</a:s>
                                <a:s r="415">
                                    <a:s>&quot;Get LDL Quantity&quot;</a:s>
                                </a:s>
                                <a:s>)</a:s>
                            </a:s>
                        </a:s>
                        <a:s> + </a:s>
                        <a:s r="418">
                            <a:s>' in the most recent lab is considered abnormal'</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="419" xsi:type="Concatenate">
                <operand localId="417" xsi:type="Concatenate">
                    <operand localId="414" valueType="t:String" value="The LDL cholesterol level of " xsi:type="Literal"/>
                    <operand localId="416" xsi:type="ToString">
                        <operand localId="415" name="Get LDL Quantity" xsi:type="ExpressionRef"/>
                    </operand>
                </operand>
                <operand localId="418" valueType="t:String" value=" in the most recent lab is considered abnormal" xsi:type="Literal"/>
            </expression>
        </def>
        <def localId="422" name="AbnormalLDLIndicator" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="422">
                    <a:s>define AbnormalLDLIndicator:
                    </a:s>
                    <a:s r="421">
                        <a:s>'warning'</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="421" valueType="t:String" value="warning" xsi:type="Literal"/>
        </def>
        <def localId="431" name="Get Last MicroalbCr Lab Result" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="431">
                    <a:s>define &quot;Get Last MicroalbCr Lab Result&quot;:
                    </a:s>
                    <a:s r="430">
                        <a:s>Last( </a:s>
                        <a:s r="429">
                            <a:s>
                                <a:s r="424">
                                    <a:s r="423">
                                        <a:s>
                                            <a:s>&quot;MicroalbCr Labs&quot;</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> mLabs</a:s>
                                </a:s>
                            </a:s>
                            <a:s> </a:s>
                            <a:s r="428">
                                <a:s>sort by </a:s>
                                <a:s r="427">
                                    <a:s r="426">
                                        <a:s r="425">
                                            <a:s>effective</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="426">
                                            <a:s>value</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                        <a:s> )</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="430" xsi:type="Last">
                <source localId="429" xsi:type="Query">
                    <source localId="424" alias="mLabs">
                        <expression localId="423" name="MicroalbCr Labs" xsi:type="ParameterRef"/>
                    </source>
                    <sort localId="428">
                        <by localId="427" direction="asc" xsi:type="ByExpression">
                            <expression localId="426" path="value" xsi:type="Property">
                                <source localId="425" name="effective" xsi:type="IdentifierRef"/>
                            </expression>
                        </by>
                    </sort>
                </source>
            </expression>
        </def>
        <def localId="447" name="On ACE or ARB Medication" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="447">
                    <a:s>define &quot;On ACE or ARB Medication&quot;:
                    </a:s>
                    <a:s r="446">
                        <a:s>exists</a:s>
                        <a:s r="445">
                            <a:s>(
                            </a:s>
                            <a:s r="445">
                                <a:s>
                                    <a:s r="433">
                                        <a:s r="432">
                                            <a:s>
                                                <a:s>&quot;ACE or ARB Medications&quot;</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> Meds</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="444">
                                    <a:s>where </a:s>
                                    <a:s r="444">
                                        <a:s r="438">
                                            <a:s r="436">
                                                <a:s r="435">
                                                    <a:s r="434">
                                                        <a:s>Meds</a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="435">
                                                        <a:s>status</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="436">
                                                    <a:s>value</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> = </a:s>
                                            <a:s r="437">
                                                <a:s>'active'</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            and </a:s>
                                        <a:s r="443">
                                            <a:s r="441">
                                                <a:s r="440">
                                                    <a:s r="439">
                                                        <a:s>Meds</a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="440">
                                                        <a:s>taken</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="441">
                                                    <a:s>value</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> = </a:s>
                                            <a:s r="442">
                                                <a:s>'y'</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                                )</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="446" xsi:type="Exists">
                <operand localId="445" xsi:type="Query">
                    <source localId="433" alias="Meds">
                        <expression localId="432" name="ACE or ARB Medications" xsi:type="ParameterRef"/>
                    </source>
                    <where localId="444" xsi:type="And">
                        <operand localId="438" xsi:type="Equal">
                            <operand localId="436" path="value" xsi:type="Property">
                                <source localId="435" path="status" scope="Meds" xsi:type="Property"/>
                            </operand>
                            <operand localId="437" valueType="t:String" value="active" xsi:type="Literal"/>
                        </operand>
                        <operand localId="443" xsi:type="Equal">
                            <operand localId="441" path="value" xsi:type="Property">
                                <source localId="440" path="taken" scope="Meds" xsi:type="Property"/>
                            </operand>
                            <operand localId="442" valueType="t:String" value="y" xsi:type="Literal"/>
                        </operand>
                    </where>
                </operand>
            </expression>
        </def>
        <def localId="457" name="Has Abnormal MicroalbCr" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="457">
                    <a:s>define &quot;Has Abnormal MicroalbCr&quot;:
                    </a:s>
                    <a:s r="456">
                        <a:s>
                            <a:s r="449">
                                <a:s r="448">
                                    <a:s>
                                        <a:s>&quot;Get Last MicroalbCr Lab Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="455">
                            <a:s>return
                            </a:s>
                            <a:s r="454">
                                <a:s r="452">
                                    <a:s>ToConcept(</a:s>
                                    <a:s r="451">
                                        <a:s r="450">
                                            <a:s>Result</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="451">
                                            <a:s>interpretation</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                </a:s>
                                <a:s> in </a:s>
                                <a:s r="453">
                                    <a:s>&quot;Abnormal Interpretation Codes&quot;</a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="456" xsi:type="Query">
                <source localId="449" alias="Result">
                    <expression localId="448" name="Get Last MicroalbCr Lab Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="455">
                    <expression localId="454" xsi:type="InValueSet">
                        <code localId="452" name="ToConcept" xsi:type="FunctionRef">
                            <operand localId="451" path="interpretation" scope="Result" xsi:type="Property"/>
                        </code>
                        <valueset localId="453" name="Abnormal Interpretation Codes"/>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="467" name="Get MicroalbCr Quantity" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="467">
                    <a:s>define &quot;Get MicroalbCr Quantity&quot;:
                    </a:s>
                    <a:s r="466">
                        <a:s>
                            <a:s r="459">
                                <a:s r="458">
                                    <a:s>
                                        <a:s>&quot;Get Last MicroalbCr Lab Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="465">
                            <a:s>return </a:s>
                            <a:s r="464">
                                <a:s>ToQuantity(</a:s>
                                <a:s r="463">
                                    <a:s r="461">
                                        <a:s r="460">
                                            <a:s>Result</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="461">
                                            <a:s>value</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="462">
                                        <a:s>Quantity</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>)</a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="466" xsi:type="Query">
                <source localId="459" alias="Result">
                    <expression localId="458" name="Get Last MicroalbCr Lab Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="465">
                    <expression localId="464" name="ToQuantity" xsi:type="FunctionRef">
                        <operand localId="463" strict="false" xsi:type="As">
                            <operand localId="461" path="value" scope="Result" xsi:type="Property"/>
                            <asTypeSpecifier localId="462" name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="508" name="Needs MicroalbCr Test" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="508">
                    <a:s>define &quot;Needs MicroalbCr Test&quot;:
                    </a:s>
                    <a:s r="507">
                        <a:s>
                            <a:s r="469">
                                <a:s r="468">
                                    <a:s>
                                        <a:s>&quot;Get Last MicroalbCr Lab Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="506">
                            <a:s>return
                            </a:s>
                            <a:s r="505">
                                <a:s>if </a:s>
                                <a:s r="471">
                                    <a:s>not </a:s>
                                    <a:s r="470">
                                        <a:s>&quot;On ACE or ARB Medication&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                    then
                                </a:s>
                                <a:s r="503">
                                    <a:s>case
                                    </a:s>
                                    <a:s r="476">
                                        <a:s>when </a:s>
                                        <a:s r="474">
                                            <a:s r="473">
                                                <a:s r="472">
                                                    <a:s>Result</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="473">
                                                    <a:s>effective</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> is null</a:s>
                                        </a:s>
                                        <a:s>
                                            then true</a:s>
                                    </a:s>
                                    <a:s>
                                    </a:s>
                                    <a:s r="488">
                                        <a:s>when </a:s>
                                        <a:s r="480">
                                            <a:s r="478">
                                                <a:s r="477">
                                                    <a:s>Result</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="478">
                                                    <a:s>effective</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> is </a:s>
                                            <a:s r="479">
                                                <a:s>dateTime</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            then </a:s>
                                        <a:s r="487">
                                            <a:s r="485">
                                                <a:s>(</a:s>
                                                <a:s r="485">
                                                    <a:s r="483">
                                                        <a:s r="482">
                                                            <a:s r="481">
                                                                <a:s>Result</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="482">
                                                                <a:s>effective</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s>.</a:s>
                                                        <a:s r="483">
                                                            <a:s>value</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s> + </a:s>
                                                    <a:s r="484">
                                                        <a:s>1 year</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                            </a:s>
                                            <a:s> &lt; </a:s>
                                            <a:s r="486">
                                                <a:s>Today()</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                    </a:s>
                                    <a:s r="501">
                                        <a:s>when </a:s>
                                        <a:s r="492">
                                            <a:s r="490">
                                                <a:s r="489">
                                                    <a:s>Result</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="490">
                                                    <a:s>effective</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> is </a:s>
                                            <a:s r="491">
                                                <a:s>Period</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            then </a:s>
                                        <a:s r="500">
                                            <a:s r="498">
                                                <a:s>(</a:s>
                                                <a:s r="498">
                                                    <a:s r="496">
                                                        <a:s>end of </a:s>
                                                        <a:s r="495">
                                                            <a:s>PeriodToInterval(</a:s>
                                                            <a:s r="494">
                                                                <a:s r="493">
                                                                    <a:s>Result</a:s>
                                                                </a:s>
                                                                <a:s>.</a:s>
                                                                <a:s r="494">
                                                                    <a:s>effective</a:s>
                                                                </a:s>
                                                            </a:s>
                                                            <a:s>)</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s> + </a:s>
                                                    <a:s r="497">
                                                        <a:s>1 year</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                            </a:s>
                                            <a:s> &lt; </a:s>
                                            <a:s r="499">
                                                <a:s>Today()</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        else false
                                        end</a:s>
                                </a:s>
                                <a:s>
                                    else false</a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="507" xsi:type="Query">
                <source localId="469" alias="Result">
                    <expression localId="468" name="Get Last MicroalbCr Lab Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="506">
                    <expression localId="505" xsi:type="If">
                        <condition asType="t:Boolean" xsi:type="As">
                            <operand localId="471" xsi:type="Not">
                                <operand localId="470" name="On ACE or ARB Medication" xsi:type="ExpressionRef"/>
                            </operand>
                            <asTypeSpecifier name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                        </condition>
                        <then localId="503" xsi:type="Case">
                            <caseItem localId="476">
                                <when localId="474" xsi:type="IsNull">
                                    <operand localId="473" path="effective" scope="Result" xsi:type="Property"/>
                                </when>
                                <then localId="475" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                            </caseItem>
                            <caseItem localId="488">
                                <when localId="480" xsi:type="Is">
                                    <operand localId="478" path="effective" scope="Result" xsi:type="Property"/>
                                    <isTypeSpecifier localId="479" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                </when>
                                <then localId="487" xsi:type="Less">
                                    <operand localId="485" xsi:type="Add">
                                        <operand localId="483" path="value" xsi:type="Property">
                                            <source localId="482" path="effective" scope="Result" xsi:type="Property"/>
                                        </operand>
                                        <operand localId="484" value="1" unit="year" xsi:type="Quantity"/>
                                    </operand>
                                    <operand localId="486" xsi:type="Today"/>
                                </then>
                            </caseItem>
                            <caseItem localId="501">
                                <when localId="492" xsi:type="Is">
                                    <operand localId="490" path="effective" scope="Result" xsi:type="Property"/>
                                    <isTypeSpecifier localId="491" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                </when>
                                <then localId="500" xsi:type="Less">
                                    <operand localId="498" xsi:type="Add">
                                        <operand localId="496" xsi:type="End">
                                            <operand localId="495" name="PeriodToInterval" xsi:type="FunctionRef">
                                                <operand asType="fhir:Period" xsi:type="As">
                                                    <operand localId="494" path="effective" scope="Result" xsi:type="Property"/>
                                                    <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                            </operand>
                                        </operand>
                                        <operand localId="497" value="1" unit="year" xsi:type="Quantity"/>
                                    </operand>
                                    <operand localId="499" xsi:type="Today"/>
                                </then>
                            </caseItem>
                            <else localId="502" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                        </then>
                        <else localId="504" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="546" name="Should Consider Ordering MicroalbCr Test" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="546">
                    <a:s>define &quot;Should Consider Ordering MicroalbCr Test&quot;:
                    </a:s>
                    <a:s r="545">
                        <a:s r="513">
                            <a:s r="510">
                                <a:s>not </a:s>
                                <a:s r="509">
                                    <a:s>&quot;Needs MicroalbCr Test&quot;</a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                                and </a:s>
                            <a:s r="512">
                                <a:s>not </a:s>
                                <a:s r="511">
                                    <a:s>&quot;On ACE or ARB Medication&quot;</a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                            and </a:s>
                        <a:s r="544">
                            <a:s>(
                            </a:s>
                            <a:s r="544">
                                <a:s>
                                    <a:s r="515">
                                        <a:s r="514">
                                            <a:s>
                                                <a:s>&quot;Get Last MicroalbCr Lab Result&quot;</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> Result</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="543">
                                    <a:s>return
                                    </a:s>
                                    <a:s r="542">
                                        <a:s>case
                                        </a:s>
                                        <a:s r="527">
                                            <a:s>when </a:s>
                                            <a:s r="519">
                                                <a:s r="517">
                                                    <a:s r="516">
                                                        <a:s>Result</a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="517">
                                                        <a:s>effective</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s> is </a:s>
                                                <a:s r="518">
                                                    <a:s>dateTime</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>
                                                then </a:s>
                                            <a:s r="526">
                                                <a:s r="524">
                                                    <a:s>(</a:s>
                                                    <a:s r="524">
                                                        <a:s r="522">
                                                            <a:s r="521">
                                                                <a:s r="520">
                                                                    <a:s>Result</a:s>
                                                                </a:s>
                                                                <a:s>.</a:s>
                                                                <a:s r="521">
                                                                    <a:s>effective</a:s>
                                                                </a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="522">
                                                                <a:s>value</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s> + </a:s>
                                                        <a:s r="523">
                                                            <a:s>10 months</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s>)</a:s>
                                                </a:s>
                                                <a:s> &lt; </a:s>
                                                <a:s r="525">
                                                    <a:s>Today()</a:s>
                                                </a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                        </a:s>
                                        <a:s r="540">
                                            <a:s>when </a:s>
                                            <a:s r="531">
                                                <a:s r="529">
                                                    <a:s r="528">
                                                        <a:s>Result</a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="529">
                                                        <a:s>effective</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s> is </a:s>
                                                <a:s r="530">
                                                    <a:s>Period</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>
                                                then </a:s>
                                            <a:s r="539">
                                                <a:s r="537">
                                                    <a:s>(</a:s>
                                                    <a:s r="537">
                                                        <a:s r="535">
                                                            <a:s>end of </a:s>
                                                            <a:s r="534">
                                                                <a:s>PeriodToInterval(</a:s>
                                                                <a:s r="533">
                                                                    <a:s r="532">
                                                                        <a:s>Result</a:s>
                                                                    </a:s>
                                                                    <a:s>.</a:s>
                                                                    <a:s r="533">
                                                                        <a:s>effective</a:s>
                                                                    </a:s>
                                                                </a:s>
                                                                <a:s>)</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s> + </a:s>
                                                        <a:s r="536">
                                                            <a:s>10 months</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s>)</a:s>
                                                </a:s>
                                                <a:s> &lt; </a:s>
                                                <a:s r="538">
                                                    <a:s>Today()</a:s>
                                                </a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            else false
                                            end</a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                                )</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="545" xsi:type="And">
                <operand localId="513" xsi:type="And">
                    <operand localId="510" xsi:type="Not">
                        <operand localId="509" name="Needs MicroalbCr Test" xsi:type="ExpressionRef"/>
                    </operand>
                    <operand localId="512" xsi:type="Not">
                        <operand localId="511" name="On ACE or ARB Medication" xsi:type="ExpressionRef"/>
                    </operand>
                </operand>
                <operand localId="544" xsi:type="Query">
                    <source localId="515" alias="Result">
                        <expression localId="514" name="Get Last MicroalbCr Lab Result" xsi:type="ExpressionRef"/>
                    </source>
                    <return localId="543">
                        <expression localId="542" xsi:type="Case">
                            <caseItem localId="527">
                                <when localId="519" xsi:type="Is">
                                    <operand localId="517" path="effective" scope="Result" xsi:type="Property"/>
                                    <isTypeSpecifier localId="518" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                </when>
                                <then localId="526" xsi:type="Less">
                                    <operand localId="524" xsi:type="Add">
                                        <operand localId="522" path="value" xsi:type="Property">
                                            <source localId="521" path="effective" scope="Result" xsi:type="Property"/>
                                        </operand>
                                        <operand localId="523" value="10" unit="months" xsi:type="Quantity"/>
                                    </operand>
                                    <operand localId="525" xsi:type="Today"/>
                                </then>
                            </caseItem>
                            <caseItem localId="540">
                                <when localId="531" xsi:type="Is">
                                    <operand localId="529" path="effective" scope="Result" xsi:type="Property"/>
                                    <isTypeSpecifier localId="530" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                </when>
                                <then localId="539" xsi:type="Less">
                                    <operand localId="537" xsi:type="Add">
                                        <operand localId="535" xsi:type="End">
                                            <operand localId="534" name="PeriodToInterval" xsi:type="FunctionRef">
                                                <operand asType="fhir:Period" xsi:type="As">
                                                    <operand localId="533" path="effective" scope="Result" xsi:type="Property"/>
                                                    <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                            </operand>
                                        </operand>
                                        <operand localId="536" value="10" unit="months" xsi:type="Quantity"/>
                                    </operand>
                                    <operand localId="538" xsi:type="Today"/>
                                </then>
                            </caseItem>
                            <else localId="541" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                        </expression>
                    </return>
                </operand>
            </expression>
        </def>
        <def localId="548" name="AbnormalMicroalbCrSummary" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="548">
                    <a:s>define AbnormalMicroalbCrSummary:
                    </a:s>
                    <a:s r="547">
                        <a:s>'Abnormal Microalbumin/Creatinine ratio detected in most recent lab results'</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="547" valueType="t:String" value="Abnormal Microalbumin/Creatinine ratio detected in most recent lab results" xsi:type="Literal"/>
        </def>
        <def localId="555" name="AbnormalMicroalbCrDetail" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="555">
                    <a:s>define AbnormalMicroalbCrDetail:
                    </a:s>
                    <a:s r="554">
                        <a:s r="552">
                            <a:s r="549">
                                <a:s>'The Microalbumin/Creatinine ratio of '</a:s>
                            </a:s>
                            <a:s> + </a:s>
                            <a:s r="551">
                                <a:s>ToString(</a:s>
                                <a:s r="550">
                                    <a:s>&quot;Get MicroalbCr Quantity&quot;</a:s>
                                </a:s>
                                <a:s>)</a:s>
                            </a:s>
                        </a:s>
                        <a:s> + </a:s>
                        <a:s r="553">
                            <a:s>' in the most recent lab is considered abnormal'</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="554" xsi:type="Concatenate">
                <operand localId="552" xsi:type="Concatenate">
                    <operand localId="549" valueType="t:String" value="The Microalbumin/Creatinine ratio of " xsi:type="Literal"/>
                    <operand localId="551" xsi:type="ToString">
                        <operand localId="550" name="Get MicroalbCr Quantity" xsi:type="ExpressionRef"/>
                    </operand>
                </operand>
                <operand localId="553" valueType="t:String" value=" in the most recent lab is considered abnormal" xsi:type="Literal"/>
            </expression>
        </def>
        <def localId="557" name="AbnormalMicroalbCrIndicator" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="557">
                    <a:s>define AbnormalMicroalbCrIndicator:
                    </a:s>
                    <a:s r="556">
                        <a:s>'warning'</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="556" valueType="t:String" value="warning" xsi:type="Literal"/>
        </def>
        <def localId="566" name="Get Last Foot Exam Result" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="566">
                    <a:s>define &quot;Get Last Foot Exam Result&quot;:
                    </a:s>
                    <a:s r="565">
                        <a:s>Last( </a:s>
                        <a:s r="564">
                            <a:s>
                                <a:s r="559">
                                    <a:s r="558">
                                        <a:s>
                                            <a:s>&quot;Foot Exams&quot;</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> fExams</a:s>
                                </a:s>
                            </a:s>
                            <a:s> </a:s>
                            <a:s r="563">
                                <a:s>sort by </a:s>
                                <a:s r="562">
                                    <a:s r="561">
                                        <a:s r="560">
                                            <a:s>effective</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="561">
                                            <a:s>value</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                        <a:s> )</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="565" xsi:type="Last">
                <source localId="564" xsi:type="Query">
                    <source localId="559" alias="fExams">
                        <expression localId="558" name="Foot Exams" xsi:type="ParameterRef"/>
                    </source>
                    <sort localId="563">
                        <by localId="562" direction="asc" xsi:type="ByExpression">
                            <expression localId="561" path="value" xsi:type="Property">
                                <source localId="560" name="effective" xsi:type="IdentifierRef"/>
                            </expression>
                        </by>
                    </sort>
                </source>
            </expression>
        </def>
        <def localId="576" name="Has Abnormal Foot Exam" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="576">
                    <a:s>define &quot;Has Abnormal Foot Exam&quot;:
                    </a:s>
                    <a:s r="575">
                        <a:s>
                            <a:s r="568">
                                <a:s r="567">
                                    <a:s>
                                        <a:s>&quot;Get Last Foot Exam Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="574">
                            <a:s>return
                            </a:s>
                            <a:s r="573">
                                <a:s r="571">
                                    <a:s>ToConcept(</a:s>
                                    <a:s r="570">
                                        <a:s r="569">
                                            <a:s>Result</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="570">
                                            <a:s>interpretation</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                </a:s>
                                <a:s> in </a:s>
                                <a:s r="572">
                                    <a:s>&quot;Abnormal Interpretation Codes&quot;</a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="575" xsi:type="Query">
                <source localId="568" alias="Result">
                    <expression localId="567" name="Get Last Foot Exam Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="574">
                    <expression localId="573" xsi:type="InValueSet">
                        <code localId="571" name="ToConcept" xsi:type="FunctionRef">
                            <operand localId="570" path="interpretation" scope="Result" xsi:type="Property"/>
                        </code>
                        <valueset localId="572" name="Abnormal Interpretation Codes"/>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="593" name="Get Foot Exam Result" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="593">
                    <a:s>define &quot;Get Foot Exam Result&quot;:
                    </a:s>
                    <a:s r="592">
                        <a:s>
                            <a:s r="578">
                                <a:s r="577">
                                    <a:s>
                                        <a:s>&quot;Get Last Foot Exam Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="591">
                            <a:s>return
                            </a:s>
                            <a:s r="590">
                                <a:s>if </a:s>
                                <a:s r="582">
                                    <a:s r="580">
                                        <a:s r="579">
                                            <a:s>Result</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="580">
                                            <a:s>value</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> is </a:s>
                                    <a:s r="581">
                                        <a:s>CodeableConcept</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                    then </a:s>
                                <a:s r="588">
                                    <a:s r="587">
                                        <a:s r="585">
                                            <a:s r="584">
                                                <a:s r="583">
                                                    <a:s>Result</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="584">
                                                    <a:s>value</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="585">
                                                <a:s>coding</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>[0]</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="588">
                                        <a:s>display</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                    else null</a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="592" xsi:type="Query">
                <source localId="578" alias="Result">
                    <expression localId="577" name="Get Last Foot Exam Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="591">
                    <expression localId="590" xsi:type="If">
                        <condition asType="t:Boolean" xsi:type="As">
                            <operand localId="582" xsi:type="Is">
                                <operand localId="580" path="value" scope="Result" xsi:type="Property"/>
                                <isTypeSpecifier localId="581" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                            </operand>
                            <asTypeSpecifier name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                        </condition>
                        <then localId="588" path="display" xsi:type="Property">
                            <source localId="587" xsi:type="Indexer">
                                <operand localId="585" path="coding" xsi:type="Property">
                                    <source localId="584" path="value" scope="Result" xsi:type="Property"/>
                                </operand>
                                <operand localId="586" valueType="t:Integer" value="0" xsi:type="Literal"/>
                            </source>
                        </then>
                        <else asType="fhir:string" xsi:type="As">
                            <operand localId="589" xsi:type="Null"/>
                            <asTypeSpecifier name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                        </else>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="630" name="Needs Foot Exam Test" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="630">
                    <a:s>define &quot;Needs Foot Exam Test&quot;:
                    </a:s>
                    <a:s r="629">
                        <a:s>
                            <a:s r="595">
                                <a:s r="594">
                                    <a:s>
                                        <a:s>&quot;Get Last Foot Exam Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="628">
                            <a:s>return
                            </a:s>
                            <a:s r="627">
                                <a:s>case
                                </a:s>
                                <a:s r="600">
                                    <a:s>when </a:s>
                                    <a:s r="598">
                                        <a:s r="597">
                                            <a:s r="596">
                                                <a:s>Result</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="597">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> is null</a:s>
                                    </a:s>
                                    <a:s>
                                        then true</a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="612">
                                    <a:s>when </a:s>
                                    <a:s r="604">
                                        <a:s r="602">
                                            <a:s r="601">
                                                <a:s>Result</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="602">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> is </a:s>
                                        <a:s r="603">
                                            <a:s>dateTime</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        then </a:s>
                                    <a:s r="611">
                                        <a:s r="609">
                                            <a:s>(</a:s>
                                            <a:s r="609">
                                                <a:s r="607">
                                                    <a:s r="606">
                                                        <a:s r="605">
                                                            <a:s>Result</a:s>
                                                        </a:s>
                                                        <a:s>.</a:s>
                                                        <a:s r="606">
                                                            <a:s>effective</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="607">
                                                        <a:s>value</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s> + </a:s>
                                                <a:s r="608">
                                                    <a:s>1 year</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>)</a:s>
                                        </a:s>
                                        <a:s> &lt; </a:s>
                                        <a:s r="610">
                                            <a:s>Today()</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="625">
                                    <a:s>when </a:s>
                                    <a:s r="616">
                                        <a:s r="614">
                                            <a:s r="613">
                                                <a:s>Result</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="614">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> is </a:s>
                                        <a:s r="615">
                                            <a:s>Period</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        then </a:s>
                                    <a:s r="624">
                                        <a:s r="622">
                                            <a:s>(</a:s>
                                            <a:s r="622">
                                                <a:s r="620">
                                                    <a:s>end of </a:s>
                                                    <a:s r="619">
                                                        <a:s>PeriodToInterval(</a:s>
                                                        <a:s r="618">
                                                            <a:s r="617">
                                                                <a:s>Result</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="618">
                                                                <a:s>effective</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s>)</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s> + </a:s>
                                                <a:s r="621">
                                                    <a:s>1 year</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>)</a:s>
                                        </a:s>
                                        <a:s> &lt; </a:s>
                                        <a:s r="623">
                                            <a:s>Today()</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                    else false
                                    end</a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="629" xsi:type="Query">
                <source localId="595" alias="Result">
                    <expression localId="594" name="Get Last Foot Exam Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="628">
                    <expression localId="627" xsi:type="Case">
                        <caseItem localId="600">
                            <when localId="598" xsi:type="IsNull">
                                <operand localId="597" path="effective" scope="Result" xsi:type="Property"/>
                            </when>
                            <then localId="599" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                        </caseItem>
                        <caseItem localId="612">
                            <when localId="604" xsi:type="Is">
                                <operand localId="602" path="effective" scope="Result" xsi:type="Property"/>
                                <isTypeSpecifier localId="603" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                            </when>
                            <then localId="611" xsi:type="Less">
                                <operand localId="609" xsi:type="Add">
                                    <operand localId="607" path="value" xsi:type="Property">
                                        <source localId="606" path="effective" scope="Result" xsi:type="Property"/>
                                    </operand>
                                    <operand localId="608" value="1" unit="year" xsi:type="Quantity"/>
                                </operand>
                                <operand localId="610" xsi:type="Today"/>
                            </then>
                        </caseItem>
                        <caseItem localId="625">
                            <when localId="616" xsi:type="Is">
                                <operand localId="614" path="effective" scope="Result" xsi:type="Property"/>
                                <isTypeSpecifier localId="615" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                            </when>
                            <then localId="624" xsi:type="Less">
                                <operand localId="622" xsi:type="Add">
                                    <operand localId="620" xsi:type="End">
                                        <operand localId="619" name="PeriodToInterval" xsi:type="FunctionRef">
                                            <operand asType="fhir:Period" xsi:type="As">
                                                <operand localId="618" path="effective" scope="Result" xsi:type="Property"/>
                                                <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                            </operand>
                                        </operand>
                                    </operand>
                                    <operand localId="621" value="1" unit="year" xsi:type="Quantity"/>
                                </operand>
                                <operand localId="623" xsi:type="Today"/>
                            </then>
                        </caseItem>
                        <else localId="626" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="665" name="Should Consider Ordering Foot Exam Test" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="665">
                    <a:s>define &quot;Should Consider Ordering Foot Exam Test&quot;:
                    </a:s>
                    <a:s r="664">
                        <a:s r="632">
                            <a:s>not </a:s>
                            <a:s r="631">
                                <a:s>&quot;Needs Foot Exam Test&quot;</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                            and
                        </a:s>
                        <a:s r="663">
                            <a:s>
                                <a:s r="634">
                                    <a:s r="633">
                                        <a:s>
                                            <a:s>&quot;Get Last Foot Exam Result&quot;</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> Result</a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                            </a:s>
                            <a:s r="662">
                                <a:s>return
                                </a:s>
                                <a:s r="661">
                                    <a:s>case
                                    </a:s>
                                    <a:s r="646">
                                        <a:s>when </a:s>
                                        <a:s r="638">
                                            <a:s r="636">
                                                <a:s r="635">
                                                    <a:s>Result</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="636">
                                                    <a:s>effective</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> is </a:s>
                                            <a:s r="637">
                                                <a:s>dateTime</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            then </a:s>
                                        <a:s r="645">
                                            <a:s r="643">
                                                <a:s>(</a:s>
                                                <a:s r="643">
                                                    <a:s r="641">
                                                        <a:s r="640">
                                                            <a:s r="639">
                                                                <a:s>Result</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="640">
                                                                <a:s>effective</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s>.</a:s>
                                                        <a:s r="641">
                                                            <a:s>value</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s> + </a:s>
                                                    <a:s r="642">
                                                        <a:s>10 months</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                            </a:s>
                                            <a:s> &lt; </a:s>
                                            <a:s r="644">
                                                <a:s>Today()</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                    </a:s>
                                    <a:s r="659">
                                        <a:s>when </a:s>
                                        <a:s r="650">
                                            <a:s r="648">
                                                <a:s r="647">
                                                    <a:s>Result</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="648">
                                                    <a:s>effective</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> is </a:s>
                                            <a:s r="649">
                                                <a:s>Period</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            then </a:s>
                                        <a:s r="658">
                                            <a:s r="656">
                                                <a:s>(</a:s>
                                                <a:s r="656">
                                                    <a:s r="654">
                                                        <a:s>end of </a:s>
                                                        <a:s r="653">
                                                            <a:s>PeriodToInterval(</a:s>
                                                            <a:s r="652">
                                                                <a:s r="651">
                                                                    <a:s>Result</a:s>
                                                                </a:s>
                                                                <a:s>.</a:s>
                                                                <a:s r="652">
                                                                    <a:s>effective</a:s>
                                                                </a:s>
                                                            </a:s>
                                                            <a:s>)</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s> + </a:s>
                                                    <a:s r="655">
                                                        <a:s>10 months</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                            </a:s>
                                            <a:s> &lt; </a:s>
                                            <a:s r="657">
                                                <a:s>Today()</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        else false
                                        end</a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="664" xsi:type="And">
                <operand localId="632" xsi:type="Not">
                    <operand localId="631" name="Needs Foot Exam Test" xsi:type="ExpressionRef"/>
                </operand>
                <operand localId="663" xsi:type="Query">
                    <source localId="634" alias="Result">
                        <expression localId="633" name="Get Last Foot Exam Result" xsi:type="ExpressionRef"/>
                    </source>
                    <return localId="662">
                        <expression localId="661" xsi:type="Case">
                            <caseItem localId="646">
                                <when localId="638" xsi:type="Is">
                                    <operand localId="636" path="effective" scope="Result" xsi:type="Property"/>
                                    <isTypeSpecifier localId="637" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                </when>
                                <then localId="645" xsi:type="Less">
                                    <operand localId="643" xsi:type="Add">
                                        <operand localId="641" path="value" xsi:type="Property">
                                            <source localId="640" path="effective" scope="Result" xsi:type="Property"/>
                                        </operand>
                                        <operand localId="642" value="10" unit="months" xsi:type="Quantity"/>
                                    </operand>
                                    <operand localId="644" xsi:type="Today"/>
                                </then>
                            </caseItem>
                            <caseItem localId="659">
                                <when localId="650" xsi:type="Is">
                                    <operand localId="648" path="effective" scope="Result" xsi:type="Property"/>
                                    <isTypeSpecifier localId="649" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                </when>
                                <then localId="658" xsi:type="Less">
                                    <operand localId="656" xsi:type="Add">
                                        <operand localId="654" xsi:type="End">
                                            <operand localId="653" name="PeriodToInterval" xsi:type="FunctionRef">
                                                <operand asType="fhir:Period" xsi:type="As">
                                                    <operand localId="652" path="effective" scope="Result" xsi:type="Property"/>
                                                    <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                            </operand>
                                        </operand>
                                        <operand localId="655" value="10" unit="months" xsi:type="Quantity"/>
                                    </operand>
                                    <operand localId="657" xsi:type="Today"/>
                                </then>
                            </caseItem>
                            <else localId="660" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                        </expression>
                    </return>
                </operand>
            </expression>
        </def>
        <def localId="667" name="AbnormalFootExamSummary" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="667">
                    <a:s>define AbnormalFootExamSummary:
                    </a:s>
                    <a:s r="666">
                        <a:s>'Abnormal Foot Exam detected in most recent lab results'</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="666" valueType="t:String" value="Abnormal Foot Exam detected in most recent lab results" xsi:type="Literal"/>
        </def>
        <def localId="672" name="AbnormalFootExamDetail" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="672">
                    <a:s>define AbnormalFootExamDetail:
                    </a:s>
                    <a:s r="671">
                        <a:s r="668">
                            <a:s>'The Foot Exam resulted in the following abnormality: '</a:s>
                        </a:s>
                        <a:s> + </a:s>
                        <a:s r="670">
                            <a:s r="669">
                                <a:s>&quot;Get Foot Exam Result&quot;</a:s>
                            </a:s>
                            <a:s>.</a:s>
                            <a:s r="670">
                                <a:s>value</a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="671" xsi:type="Concatenate">
                <operand localId="668" valueType="t:String" value="The Foot Exam resulted in the following abnormality: " xsi:type="Literal"/>
                <operand localId="670" path="value" xsi:type="Property">
                    <source localId="669" name="Get Foot Exam Result" xsi:type="ExpressionRef"/>
                </operand>
            </expression>
        </def>
        <def localId="674" name="AbnormalFootExamIndicator" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="674">
                    <a:s>define AbnormalFootExamIndicator:
                    </a:s>
                    <a:s r="673">
                        <a:s>'warning'</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="673" valueType="t:String" value="warning" xsi:type="Literal"/>
        </def>
        <def localId="683" name="Get Last Eye Exam Result" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="683">
                    <a:s>define &quot;Get Last Eye Exam Result&quot;:
                    </a:s>
                    <a:s r="682">
                        <a:s>Last( </a:s>
                        <a:s r="681">
                            <a:s>
                                <a:s r="676">
                                    <a:s r="675">
                                        <a:s>
                                            <a:s>&quot;Eye Exams&quot;</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> eExams</a:s>
                                </a:s>
                            </a:s>
                            <a:s> </a:s>
                            <a:s r="680">
                                <a:s>sort by </a:s>
                                <a:s r="679">
                                    <a:s r="678">
                                        <a:s r="677">
                                            <a:s>effective</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="678">
                                            <a:s>value</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                        <a:s> )</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="682" xsi:type="Last">
                <source localId="681" xsi:type="Query">
                    <source localId="676" alias="eExams">
                        <expression localId="675" name="Eye Exams" xsi:type="ParameterRef"/>
                    </source>
                    <sort localId="680">
                        <by localId="679" direction="asc" xsi:type="ByExpression">
                            <expression localId="678" path="value" xsi:type="Property">
                                <source localId="677" name="effective" xsi:type="IdentifierRef"/>
                            </expression>
                        </by>
                    </sort>
                </source>
            </expression>
        </def>
        <def localId="693" name="Has Abnormal Eye Exam" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="693">
                    <a:s>define &quot;Has Abnormal Eye Exam&quot;:
                    </a:s>
                    <a:s r="692">
                        <a:s>
                            <a:s r="685">
                                <a:s r="684">
                                    <a:s>
                                        <a:s>&quot;Get Last Eye Exam Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="691">
                            <a:s>return
                            </a:s>
                            <a:s r="690">
                                <a:s r="688">
                                    <a:s>ToConcept(</a:s>
                                    <a:s r="687">
                                        <a:s r="686">
                                            <a:s>Result</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="687">
                                            <a:s>interpretation</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                </a:s>
                                <a:s> in </a:s>
                                <a:s r="689">
                                    <a:s>&quot;Abnormal Interpretation Codes&quot;</a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="692" xsi:type="Query">
                <source localId="685" alias="Result">
                    <expression localId="684" name="Get Last Eye Exam Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="691">
                    <expression localId="690" xsi:type="InValueSet">
                        <code localId="688" name="ToConcept" xsi:type="FunctionRef">
                            <operand localId="687" path="interpretation" scope="Result" xsi:type="Property"/>
                        </code>
                        <valueset localId="689" name="Abnormal Interpretation Codes"/>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="710" name="Get Eye Exam Result" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="710">
                    <a:s>define &quot;Get Eye Exam Result&quot;:
                    </a:s>
                    <a:s r="709">
                        <a:s>
                            <a:s r="695">
                                <a:s r="694">
                                    <a:s>
                                        <a:s>&quot;Get Last Eye Exam Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="708">
                            <a:s>return
                            </a:s>
                            <a:s r="707">
                                <a:s>if </a:s>
                                <a:s r="699">
                                    <a:s r="697">
                                        <a:s r="696">
                                            <a:s>Result</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="697">
                                            <a:s>value</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> is </a:s>
                                    <a:s r="698">
                                        <a:s>CodeableConcept</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                    then </a:s>
                                <a:s r="705">
                                    <a:s r="704">
                                        <a:s r="702">
                                            <a:s r="701">
                                                <a:s r="700">
                                                    <a:s>Result</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="701">
                                                    <a:s>value</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="702">
                                                <a:s>coding</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>[0]</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="705">
                                        <a:s>display</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                    else null</a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="709" xsi:type="Query">
                <source localId="695" alias="Result">
                    <expression localId="694" name="Get Last Eye Exam Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="708">
                    <expression localId="707" xsi:type="If">
                        <condition asType="t:Boolean" xsi:type="As">
                            <operand localId="699" xsi:type="Is">
                                <operand localId="697" path="value" scope="Result" xsi:type="Property"/>
                                <isTypeSpecifier localId="698" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                            </operand>
                            <asTypeSpecifier name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                        </condition>
                        <then localId="705" path="display" xsi:type="Property">
                            <source localId="704" xsi:type="Indexer">
                                <operand localId="702" path="coding" xsi:type="Property">
                                    <source localId="701" path="value" scope="Result" xsi:type="Property"/>
                                </operand>
                                <operand localId="703" valueType="t:Integer" value="0" xsi:type="Literal"/>
                            </source>
                        </then>
                        <else asType="fhir:string" xsi:type="As">
                            <operand localId="706" xsi:type="Null"/>
                            <asTypeSpecifier name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                        </else>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="747" name="Needs Eye Exam" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="747">
                    <a:s>define &quot;Needs Eye Exam&quot;:
                    </a:s>
                    <a:s r="746">
                        <a:s>
                            <a:s r="712">
                                <a:s r="711">
                                    <a:s>
                                        <a:s>&quot;Get Last Eye Exam Result&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> Result</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                        </a:s>
                        <a:s r="745">
                            <a:s>return
                            </a:s>
                            <a:s r="744">
                                <a:s>case
                                </a:s>
                                <a:s r="717">
                                    <a:s>when </a:s>
                                    <a:s r="715">
                                        <a:s r="714">
                                            <a:s r="713">
                                                <a:s>Result</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="714">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> is null</a:s>
                                    </a:s>
                                    <a:s>
                                        then true</a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="729">
                                    <a:s>when </a:s>
                                    <a:s r="721">
                                        <a:s r="719">
                                            <a:s r="718">
                                                <a:s>Result</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="719">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> is </a:s>
                                        <a:s r="720">
                                            <a:s>dateTime</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        then </a:s>
                                    <a:s r="728">
                                        <a:s r="726">
                                            <a:s>(</a:s>
                                            <a:s r="726">
                                                <a:s r="724">
                                                    <a:s r="723">
                                                        <a:s r="722">
                                                            <a:s>Result</a:s>
                                                        </a:s>
                                                        <a:s>.</a:s>
                                                        <a:s r="723">
                                                            <a:s>effective</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="724">
                                                        <a:s>value</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s> + </a:s>
                                                <a:s r="725">
                                                    <a:s>1 year</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>)</a:s>
                                        </a:s>
                                        <a:s> &lt; </a:s>
                                        <a:s r="727">
                                            <a:s>Today()</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="742">
                                    <a:s>when </a:s>
                                    <a:s r="733">
                                        <a:s r="731">
                                            <a:s r="730">
                                                <a:s>Result</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="731">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> is </a:s>
                                        <a:s r="732">
                                            <a:s>Period</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        then </a:s>
                                    <a:s r="741">
                                        <a:s r="739">
                                            <a:s>(</a:s>
                                            <a:s r="739">
                                                <a:s r="737">
                                                    <a:s>end of </a:s>
                                                    <a:s r="736">
                                                        <a:s>PeriodToInterval(</a:s>
                                                        <a:s r="735">
                                                            <a:s r="734">
                                                                <a:s>Result</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="735">
                                                                <a:s>effective</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s>)</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s> + </a:s>
                                                <a:s r="738">
                                                    <a:s>1 year</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>)</a:s>
                                        </a:s>
                                        <a:s> &lt; </a:s>
                                        <a:s r="740">
                                            <a:s>Today()</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                    else false
                                    end</a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="746" xsi:type="Query">
                <source localId="712" alias="Result">
                    <expression localId="711" name="Get Last Eye Exam Result" xsi:type="ExpressionRef"/>
                </source>
                <return localId="745">
                    <expression localId="744" xsi:type="Case">
                        <caseItem localId="717">
                            <when localId="715" xsi:type="IsNull">
                                <operand localId="714" path="effective" scope="Result" xsi:type="Property"/>
                            </when>
                            <then localId="716" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                        </caseItem>
                        <caseItem localId="729">
                            <when localId="721" xsi:type="Is">
                                <operand localId="719" path="effective" scope="Result" xsi:type="Property"/>
                                <isTypeSpecifier localId="720" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                            </when>
                            <then localId="728" xsi:type="Less">
                                <operand localId="726" xsi:type="Add">
                                    <operand localId="724" path="value" xsi:type="Property">
                                        <source localId="723" path="effective" scope="Result" xsi:type="Property"/>
                                    </operand>
                                    <operand localId="725" value="1" unit="year" xsi:type="Quantity"/>
                                </operand>
                                <operand localId="727" xsi:type="Today"/>
                            </then>
                        </caseItem>
                        <caseItem localId="742">
                            <when localId="733" xsi:type="Is">
                                <operand localId="731" path="effective" scope="Result" xsi:type="Property"/>
                                <isTypeSpecifier localId="732" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                            </when>
                            <then localId="741" xsi:type="Less">
                                <operand localId="739" xsi:type="Add">
                                    <operand localId="737" xsi:type="End">
                                        <operand localId="736" name="PeriodToInterval" xsi:type="FunctionRef">
                                            <operand asType="fhir:Period" xsi:type="As">
                                                <operand localId="735" path="effective" scope="Result" xsi:type="Property"/>
                                                <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                            </operand>
                                        </operand>
                                    </operand>
                                    <operand localId="738" value="1" unit="year" xsi:type="Quantity"/>
                                </operand>
                                <operand localId="740" xsi:type="Today"/>
                            </then>
                        </caseItem>
                        <else localId="743" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                    </expression>
                </return>
            </expression>
        </def>
        <def localId="782" name="Should Consider Ordering Eye Exam" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="782">
                    <a:s>define &quot;Should Consider Ordering Eye Exam&quot;:
                    </a:s>
                    <a:s r="781">
                        <a:s r="749">
                            <a:s>not </a:s>
                            <a:s r="748">
                                <a:s>&quot;Needs Eye Exam&quot;</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                            and
                        </a:s>
                        <a:s r="780">
                            <a:s>
                                <a:s r="751">
                                    <a:s r="750">
                                        <a:s>
                                            <a:s>&quot;Get Last Eye Exam Result&quot;</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s> Result</a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                            </a:s>
                            <a:s r="779">
                                <a:s>return
                                </a:s>
                                <a:s r="778">
                                    <a:s>case
                                    </a:s>
                                    <a:s r="763">
                                        <a:s>when </a:s>
                                        <a:s r="755">
                                            <a:s r="753">
                                                <a:s r="752">
                                                    <a:s>Result</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="753">
                                                    <a:s>effective</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> is </a:s>
                                            <a:s r="754">
                                                <a:s>dateTime</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            then </a:s>
                                        <a:s r="762">
                                            <a:s r="760">
                                                <a:s>(</a:s>
                                                <a:s r="760">
                                                    <a:s r="758">
                                                        <a:s r="757">
                                                            <a:s r="756">
                                                                <a:s>Result</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="757">
                                                                <a:s>effective</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s>.</a:s>
                                                        <a:s r="758">
                                                            <a:s>value</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s> + </a:s>
                                                    <a:s r="759">
                                                        <a:s>10 months</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                            </a:s>
                                            <a:s> &lt; </a:s>
                                            <a:s r="761">
                                                <a:s>Today()</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                    </a:s>
                                    <a:s r="776">
                                        <a:s>when </a:s>
                                        <a:s r="767">
                                            <a:s r="765">
                                                <a:s r="764">
                                                    <a:s>Result</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="765">
                                                    <a:s>effective</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> is </a:s>
                                            <a:s r="766">
                                                <a:s>Period</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            then </a:s>
                                        <a:s r="775">
                                            <a:s r="773">
                                                <a:s>(</a:s>
                                                <a:s r="773">
                                                    <a:s r="771">
                                                        <a:s>end of </a:s>
                                                        <a:s r="770">
                                                            <a:s>PeriodToInterval(</a:s>
                                                            <a:s r="769">
                                                                <a:s r="768">
                                                                    <a:s>Result</a:s>
                                                                </a:s>
                                                                <a:s>.</a:s>
                                                                <a:s r="769">
                                                                    <a:s>effective</a:s>
                                                                </a:s>
                                                            </a:s>
                                                            <a:s>)</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s> + </a:s>
                                                    <a:s r="772">
                                                        <a:s>10 months</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                            </a:s>
                                            <a:s> &lt; </a:s>
                                            <a:s r="774">
                                                <a:s>Today()</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                        else false
                                        end</a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="781" xsi:type="And">
                <operand localId="749" xsi:type="Not">
                    <operand localId="748" name="Needs Eye Exam" xsi:type="ExpressionRef"/>
                </operand>
                <operand localId="780" xsi:type="Query">
                    <source localId="751" alias="Result">
                        <expression localId="750" name="Get Last Eye Exam Result" xsi:type="ExpressionRef"/>
                    </source>
                    <return localId="779">
                        <expression localId="778" xsi:type="Case">
                            <caseItem localId="763">
                                <when localId="755" xsi:type="Is">
                                    <operand localId="753" path="effective" scope="Result" xsi:type="Property"/>
                                    <isTypeSpecifier localId="754" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                </when>
                                <then localId="762" xsi:type="Less">
                                    <operand localId="760" xsi:type="Add">
                                        <operand localId="758" path="value" xsi:type="Property">
                                            <source localId="757" path="effective" scope="Result" xsi:type="Property"/>
                                        </operand>
                                        <operand localId="759" value="10" unit="months" xsi:type="Quantity"/>
                                    </operand>
                                    <operand localId="761" xsi:type="Today"/>
                                </then>
                            </caseItem>
                            <caseItem localId="776">
                                <when localId="767" xsi:type="Is">
                                    <operand localId="765" path="effective" scope="Result" xsi:type="Property"/>
                                    <isTypeSpecifier localId="766" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                </when>
                                <then localId="775" xsi:type="Less">
                                    <operand localId="773" xsi:type="Add">
                                        <operand localId="771" xsi:type="End">
                                            <operand localId="770" name="PeriodToInterval" xsi:type="FunctionRef">
                                                <operand asType="fhir:Period" xsi:type="As">
                                                    <operand localId="769" path="effective" scope="Result" xsi:type="Property"/>
                                                    <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                            </operand>
                                        </operand>
                                        <operand localId="772" value="10" unit="months" xsi:type="Quantity"/>
                                    </operand>
                                    <operand localId="774" xsi:type="Today"/>
                                </then>
                            </caseItem>
                            <else localId="777" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                        </expression>
                    </return>
                </operand>
            </expression>
        </def>
        <def localId="784" name="AbnormalEyeExamSummary" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="784">
                    <a:s>define AbnormalEyeExamSummary:
                    </a:s>
                    <a:s r="783">
                        <a:s>'Abnormal Eye Exam detected in most recent lab results'</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="783" valueType="t:String" value="Abnormal Eye Exam detected in most recent lab results" xsi:type="Literal"/>
        </def>
        <def localId="789" name="AbnormalEyeExamDetail" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="789">
                    <a:s>define AbnormalEyeExamDetail:
                    </a:s>
                    <a:s r="788">
                        <a:s r="785">
                            <a:s>'The Eye Exam resulted in the following abnormality: '</a:s>
                        </a:s>
                        <a:s> + </a:s>
                        <a:s r="787">
                            <a:s r="786">
                                <a:s>&quot;Get Eye Exam Result&quot;</a:s>
                            </a:s>
                            <a:s>.</a:s>
                            <a:s r="787">
                                <a:s>value</a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="788" xsi:type="Concatenate">
                <operand localId="785" valueType="t:String" value="The Eye Exam resulted in the following abnormality: " xsi:type="Literal"/>
                <operand localId="787" path="value" xsi:type="Property">
                    <source localId="786" name="Get Eye Exam Result" xsi:type="ExpressionRef"/>
                </operand>
            </expression>
        </def>
        <def localId="791" name="AbnormalEyeExamIndicator" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="791">
                    <a:s>define AbnormalEyeExamIndicator:
                    </a:s>
                    <a:s r="790">
                        <a:s>'warning'</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="790" valueType="t:String" value="warning" xsi:type="Literal"/>
        </def>
    </statements>
</library>
